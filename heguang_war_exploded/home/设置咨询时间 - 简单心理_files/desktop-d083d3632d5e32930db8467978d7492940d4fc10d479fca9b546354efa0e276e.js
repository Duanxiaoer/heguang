(function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},t={config:{api_url:"",api_header:{},socket_url:"",debug:!1},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isString:function(e){return null!=e&&e.constructor===String},isNumber:function(e){return null!=e&&e.constructor===Number},isArray:function(e){return e&&e.constructor===Array},isObject:function(e){return e&&e.constructor===Object},isFunction:function(e){return"function"==typeof e},isBlank:function(e){return null==e||e.constructor===Array&&0===e.length||e.constructor===Object&&0===Object.keys(e).length||e.constructor===String&&""===e}},n=0;t.id=function(e){return n++,void 0===e?n.toString():e+n},t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},t.timestamp=String(Date.now()),t.each=function(e,n){if(t.isArray(e))for(var a=-1,o=e.length;++a<o&&!1!==n(a,e[a]););else{if(!t.isObject(e))throw new TypeError("Expected array or object");a=-1;var i=Object.keys(e);for(o=i.length;++a<o&&!1!==n(i[a],e[i[a]]););}return e},t.map=function(e,n){if(t.isString(n)){var a=n;n=function(e,t){return t[a]}}if(t.isArray(e))for(var o=-1,i=e.length,r=[];++o<i;)r[o]=n(o,e[o]);else{if(!t.isObject(e))throw new TypeError("Expected array or object");o=-1;var s=Object.keys(e);for(i=s.length,r={};++o<i;)r[s[o]]=n(s[o],e[s[o]])}return r},t.findIndex=function(e,n){if(!t.isFunction(n)){var a=n;n=function(e){var n=!1;return t.each(a,function(t,a){if(e[t]===a)return n=!0,!1}),n}}var o=-1;return t.each(e,function(e,t){if(n(t))return o=e,!1}),o},t.filter=function(e,n){var a=[];return t.each(e,function(e,t){n(e,t)&&a.push(t)}),a},t.first=function(e,n){var a=null;return t.each(e,function(e,t){if(n(e,t))return a=t,!1}),a},t.compact=function(e){if(t.isArray(e))for(var n=-1,a=e.length;++n<a;)t.isBlank(e[n])&&(e.splice(n,1),n-=1,a-=1);else{if(!t.isObject(e))throw new TypeError("Expected array or object");n=-1;var o=Object.keys(e);for(a=o.length;++n<a;)t.isBlank(e[o[n]])&&(delete e[o[n]],o.splice(n,1),n-=1,a-=1)}return e},t.clone=function(e){return JSON.parse(JSON.stringify(e))};var a=function(e,n){t.each(n,function(n,o){t.isObject(o)?("undefined"==typeof e[n]&&(e[n]={}),a(e[n],o)):e[n]=o})};t.merge=function(){var e=Array.apply(null,arguments),n=e.shift();return t.isObject(n)?t.each(e,function(e,o){t.each(o,function(e,o){t.isObject(o)?a(n[e],o):n[e]=o})}):t.isArray(n)&&t.each(e,function(e,t){n=n.concat(t)}),n},t.uniq=function(e,n){var a=[];if(void 0===n)var o=function(e,t){return a.indexOf(t)<0};else if(t.isString(n))o=function(e,o){var i={};return i[n]=o[n],t.findIndex(a,i)<0};else o=n;return t.each(e,function(e,t){o(e,t)&&a.push(t)}),a},t.encodeURIComponent=function(e,n){return t.isString(e)?encodeURIComponent(e):t.compact(Object.keys(e).map(function(a){return t.isBlank(e[a])?"":t.isObject(e[a])?t.isBlank(n)?t.encodeURIComponent(e[a],a):t.encodeURIComponent(e[a],n+"%5B"+a+"%5D"):t.isBlank(n)?a+"="+encodeURIComponent(e[a]):n+"%5B"+a+"%5D="+encodeURIComponent(e[a])})).join("&")},t.deferred=function(){this.resolve=null,this.reject=null,this.promise=new Promise(function(e,t){this.resolve=e,this.reject=t}.bind(this)),Object.freeze(this)},t.topics={},t.on=function(e,n,a){if("string"!=typeof e)throw new TypeError("topic expect a string");var o=t.id("."+e+".");return a=t.merge({once:!1,sync:!1},a||{}),t.topics[o]={options:a,callback:n},o},t.off=function(e){var n="."+e+".";t.each(t.topics,function(e){e.startsWith(n)&&delete t.topics[e]})},t.once=function(e,n,a){t.on(e,n,t.merge(a,{once:!0}))},t.sync=function(e,n,a){t.on(e,n,t.merge(a,{sync:!0}))},t.trigger=function(e,n){var a=new t.deferred,o="."+e+".",i=[],r=[];return t.each(t.topics,function(e,n){e.startsWith(o)&&(n.options&&n.options.sync?i.push(n.callback):r.push(n.callback),n.options&&n.options.once&&delete t.topics[e])}),t.each(i,function(t,a){a(e,n)}),setTimeout(function(){t.each(r,function(t,a){a(e,n)}),a.resolve()}),a.promise},t.getScript=function(e){var n=new t.deferred,a=document.createElement("script"),o=document.getElementsByTagName("script")[0];return a.async=1,a.onload=a.onreadystatechange=function(e,t){(t||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=a.onreadystatechange=null,t||n.resolve&&n.resolve())},a.src=e,o.parentNode.insertBefore(a,o),n.promise},t.module_names={plugin:[],tag:[]},t.getModule=function(e,n,a){if(t.module_names[e].indexOf(a)>=0){var o=new t.deferred;return o.resolve(),o.promise}return t.getScript(env.app.assets+n+"/"+a+".js?_="+t.timestamp).then(function(){t.module_names[e].push(a)})},t.getPlugin=function(e){return t.getModule("plugin","assets-plugins",e)},t.getTag=function(e){return t.getModule("tag","assets-tags",e)},t.remote={},t.remote.request=function(e){if(t.isString(e)&&(e={url:e}),(e=t.merge({method:"GET",dataType:"json",header:t.config.api_header},e||{})).url.indexOf(location.host)>=0&&(e.url=e.url.replace(new RegExp("http(s)?://"+location.host),"")),t.isBlank(e.url))throw new URIError("url \u4e0d\u80fd\u4e3a\u7a7a");var n=new t.deferred,a=new XMLHttpRequest;return a.addEventListener("load",function(e){try{e.currentTarget.response.errors?n.reject(e):(n.resolve(e.currentTarget.response),console.log(e,e.currentTarget.response))}catch(t){n.reject(e)}}),a.addEventListener("error",function(e){console.error(e),n.reject(e)}),a.open(e.method,e.url),a.responseType=e.dataType,a.send(),n.promise},t.remote.get=function(e,n){return 0!==e.indexOf("http")&&0!==e.indexOf("/")&&(e=t.config.api_url+e),t.isBlank(n)||(e=e+"?"+t.encodeURIComponent(n)),t.remote.request({url:e})},t.remote.post=function(e,n){return 0!==e.indexOf("http")&&0!==e.indexOf("/")&&(e=t.config.api_url+e),t.isBlank(n)||(e=e+"?"+t.encodeURIComponent(n)),t.remote.request({url:e,method:"POST"})},t.remote["delete"]=function(e,n){return 0!==e.indexOf("http")&&0!==e.indexOf("/")&&(e=t.config.api_url+e),t.isBlank(n)||(e=e+"?"+t.encodeURIComponent(n)),t.remote.request({url:e,method:"DELETE"})},t.remote.put=function(e,n){return 0!==e.indexOf("http")&&0!==e.indexOf("/")&&(e=t.config.api_url+e),t.isBlank(n)||(e=e+"?"+t.encodeURIComponent(n)),t.remote.request({url:e,method:"PUT"})},t.restful={},t.restful.setData=function(e,n){return e.data=t.merge(e.data,n),e.update(),n},t.restful.index=function(e,n){var a={};a[n]=[],a[n+"_next_link"]=null,a[n+"_loading"]=!1,t.restful.setData(e,a),e[n+"_loaded_done"]=function(a){console.log(a);var o={};return o[n]=e.data[n].concat(a.data),o[n+"_loading"]=!1,a.links&&a.links.next?o[n+"_next_link"]=a.links.next:o[n+"_next_link"]=null,t.restful.setData(e,o),a},e[n+"_loaded_fail"]=function(a){var o={};return o[n+"_loading"]=!1,t.restful.setData(e,o),a},e[n+"_load_next"]=function(){var a={};a[n+"_loading"]=!0,t.restful.setData(e,a),t.remote.get(e.data[n+"_next_link"]).then(e[n+"_loaded_done"],e[n+"_loaded_fail"])}},t.restful.show=function(e,n){var a={};a[n]={},a[n+"_loading"]=!1,t.restful.setData(e,a),e[n+"_loaded_done"]=function(a){var o={};return o[n]=a.data,o[n+"_loading"]=!1,t.restful.setData(e,o),a},e[n+"_loaded_fail"]=function(a){var o={};return o[n+"_loading"]=!1,t.restful.setData(e,o),a}},t.socket={instance:null,subscribed:[]};var o={subscribe:[]};t.socket.connect=function(){if(null!=t.socket.instance)return t.socket.instance;var e=new WebSocket(t.config.socket_url);return e.onopen=function(e){t.each(o.subscribe,function(e,n){t.socket.instance.send(n)}),o.subscribe=[],t.trigger("socket.open",e)},e.onmessage=function(e){var n=JSON.parse(e.data),a="socket.message";n.identifier&&(a+="."+JSON.parse(n.identifier).channel),n.type&&(a+="."+n.type),t.isObject(n.message)&&n.message.action&&(a+="."+n.message.action,n=n.message.data),t.trigger(a,n)},e.onclose=function(e){console.log(e),t.socket.instance=null,t.trigger("socket.close",e)},e.onerror=function(e){console.error(e),t.trigger("socket.error",e)},t.socket.instance=e,t.socket},t.socket.alert=function(){$(".conversation_user-alert").append('<div class="j-alert j-alert-warn j-alert-fixed j-alert-socket"><div class="j-alert-icon j-alert-icon-warn"></div><div class="j-alert-content">\u4f60\u7684\u7f51\u7edc\u4f3c\u4e4e\u4e0d\u592a\u597d\uff0c\u70b9\u8fd9\u91cc\u5237\u65b0</div></div>')},t.socket.send=function(e,n,a){t.isBlank(e)&&(e="message");var i=JSON.stringify({command:e,identifier:JSON.stringify(n),data:JSON.stringify(a)});return t.socket.instance&&1===t.socket.instance.readyState?"subscribe"===e||"unsubscribe"===e||t.socket.subscribed.indexOf(n.channel)>=0?t.socket.instance.send(i):("undefined"==typeof o[n.channel]&&(o[n.channel]=[]),o[n.channel].push(i)):"subscribe"===e||"unsubscribe"===e?o.subscribe.push(i):("undefined"==typeof o[n.channel]&&(o[n.channel]=[]),o[n.channel].push(i)),t.socket},t.socket.action=function(e,n,a){return t.socket.send("message",{channel:e},t.merge(a||{},{action:n}))},t.socket.subscribe=function(e,n){return t.socket.send("subscribe",t.merge({channel:e},n||{})),t.once("socket.message."+e+".confirm_subscription",function(e,n){var a=JSON.parse(n.identifier);t.socket.subscribed.push(a.channel),o[a.channel]&&(t.each(o[a.channel],function(e,n){t.socket.instance.send(n)}),o[a.channel]=[])}),t.socket},t.socket.unsubscribe=function(e,n){return t.socket.identifier=t.merge({channel:e},n||{}),t.socket.send("unsubscribe",t.socket.identifier)},t.socket.close=function(){t.socket.instance=null,t.socket.subscribed=[],o={subscribe:[]}},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof exports&&"object"==typeof module?module.exports=t:e.J=t}).call(this),window.J.config.api_url="/api/v1/",window.J.config.socket_url=("http:"===location.protocol?"ws://":"wss://")+location.host+"/cable",function(e,t){t.module_names={plugin:[],tag:[]},t.getModule=function(e,n,a){if(t.module_names[e].indexOf(a)>=0){var o=t.Deferred();return o.resolve(),o.promise()}return t.getScript("".concat(env.app.assets).concat(n,"/").concat(a,".js?_=").concat(t.timestamp),function(){t.module_names[e].push(a)})},t.getPlugin=function(e){return t.getModule("plugin","assets-plugins",e)},t.getTag=function(e){return t.getModule("tag","assets-tags",e)},t.without=function(){var e=arguments[0],n=Array.prototype.slice.call(arguments);n.shift();var a=[];return t.each(e,function(e,t){n.indexOf(t)<0&&a.push(t)}),a},t.combinations=function(e){var n=[],a=0,o=e.length;if(1===o)for(;a<e.length;){for(var i=0;i<e[a].length;)n.push([e[a][i]]),i++;a++}else for(;a<e.length;){var r=e.shift();for(i=0;i<r.length;){for(var s=t.combinations(e.slice(),o-1),c=0;c<s.length;)n.push([r[i]].concat(s[c])),c++;i++}a++}return n},t.findItem=function(e,n,a){if(!t.isFunction(n))if(void 0!==a){var o=n;n=function(e){return"undefined"!=typeof e[o]&&e[o]===a}}else{var i=n;n=function(e){var n=!1;return t.each(i,function(t,a){if(e[t]===a)return n=!0,!1}),n}}var r=null;return t.each(e,function(e,t){if(n(t))return r=t,!1}),r},t.findIndex=function(e,n){if(!t.isFunction(n)){var a=n;n=function(e){var n=!1;return t.each(a,function(t,a){if(e[t]===a)return n=!0,!1}),n}}var o=-1;return t.each(e,function(e,t){if(n(t))return o=e,!1}),o},t.intersection=function(e,n){return e.filter(function(e){return t.isArray(n)?n.indexOf(e)>=0:n.contains(e)})},e.$document=t(document),e.$body=t("body"),e.$title=t("title"),t.title=function(e){$title.text(e),"undefined"!=typeof App&&App.post("title",{title:e},{})},t.object2css=function(e){var n=[];return t.each(e,function(e,t){n.push("".concat(e,":").concat(t))}),n.join(";")},t.scrollTo=function(e){e.constructor===Number?setTimeout(function(){t("html, body").animate({scrollTop:e},200)}):(e instanceof jQuery||(e=t(e)),e.length&&setTimeout(function(){t("html, body").animate({scrollTop:e.position().top-20},200)}))},t.underscore=function(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},t.pluralize=function(e){return t.underscore(e)+"s"},t.queryString=function(n){var a=e.location.search.substr(1);if(""===a)return"";var o=a.split("&"),i={};return t.each(o,function(e,t){var n=t.split("=");2===n.length&&(i[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}),i[n]||""},t.unescape=function(e){return t("<textarea/>").html(e).text()},t.toast=function(e){var n=J.id("toast_"),a=t('<div id="'+n+'" style="display:none;position:fixed;top:45%;width:70%;background:rgba(0,0,0,0.7);z-index:1000;margin:0 12%;border-radius:3px;box-shadow:2px 2px 5px #888;text-align:center;color:#fff;font-size:18px;padding:3%">'+e+"</div>");$body.append(a);var o=setTimeout(function(){a.trigger("toast.remove")},5e3);return a.bind("toast.remove",function(){clearTimeout(o),a.fadeOut(400,function(){a.remove()})}),a.fadeIn().click(function(){a.trigger("toast.remove")}),a},t.timestamp=t.now(),t.keys=function(e){var n=[];return t.each(e,function(e){n.push(e)}),n},t.values=function(e){var n=[];return t.each(e,function(e,t){n.push(t)}),n}}(window,jQuery),function(e){var t=[],n=[],a=[],o=!1,i=null;e.$loaded=function(e){t.push(e)},e.$unload=function(e){a.push(e)},e.$unload_once=function(e){n.push(e)},$(document).on("turbolinks:before-visit",function(e){J.trigger("page.before-load",e)}).on("turbolinks:load",function(t){e.$body=$("body"),e.$title=$("title"),J.trigger("page.load",t)}).on("turbolinks:before-cache",function(e){$("meta[name=turbolinks-no-cache]").length&&$body.after('<div id="cached" style="display:none"></div>'),J.trigger("page.before-cache",e)}).on("visibilitychange",function(){J.trigger("page.visibilitychange")}),J.on("page.load",function(e,n){J.each(t,function(e,t){t(n)}),Vue.prototype.$browser.wechat||setTimeout(function(){J.trigger("page.ready")},500)}),J.on("page.ready",function(){if(!Vue.prototype.$browser.desktop)if(Vue.prototype.$browser.miniprogram||Vue.prototype.$browser.app){var e=document.querySelector("body.mobile #bell");e&&""===e.style.display&&(e.style.display="none");var t=document.querySelector("#bottom_msg");t&&""===t.style.display&&(t.style.display="none")}else{var n=document.querySelector("body.mobile .header,body.mobile .header-uni");n&&"block"!==n.style.display&&(n.style.display="block");var a=document.querySelector("body.mobile");a&&(a.style.top=n?"43px":"0px")}}),J.on("page.before-load",function(e,t){o?o=!1:(i&&i.destroy(),J.each(n,function(e,n){if(t&&t.isDefaultPrevented())return!1;n(t)}),n=[],J.each(a,function(e,n){if(t&&t.isDefaultPrevented())return!1;n(t)}))}),$document.on("submit","form[method=get]",function(){return Turbolinks.visit(this.action+"?"+$(this).serialize(),{action:"replace"}),!1}),e.addEventListener("beforeunload",function(){return J.trigger("page.before-load"),null}),$document.on("click","#back",function(){var t;this.attributes.href&&(t=this.attributes.href.value),"/testing_logs/new"===e.location.pathname&&""!==$("body").data("userId")?$.confirm({content:"\u8fd8\u5dee\u51e0\u9053\u9898\u54e6\uff0c\u786e\u8ba4\u4e0d\u6d4b\u5566\uff1f",confirmButton:"\u4e0d\u6d4b\u5566",cancelButton:"\u7ee7\u7eed\u6d4b",confirm:function(){history.back()}}):"/order_counselings/new"===e.location.pathname?$body.find("order_counseling_form").hasClass("form-show")?$.confirm({content:"\u5df2\u586b\u5185\u5bb9\u5c06\u88ab\u6e05\u7a7a\uff0c\u786e\u5b9a\u653e\u5f03\u586b\u5199\uff1f",confirmButton:"\u786e\u5b9a",cancelButton:"\u53d6\u6d88",confirm:function(){history.back()}}):$body.find("kalendar").hasClass("kalendar-show")?$.confirm({title:"\u6ca1\u6709\u5408\u9002\u7684\u65f6\u95f4\uff1f",content:"\u8054\u7cfb\u5ba2\u670d\uff0c\u5e2e\u60a8\u4e0e\u54a8\u8be2\u5e08\u534f\u8c03\u9002\u5408\u7684\u65f6\u95f4",confirmButton:"\u8054\u7cfb\u5ba2\u670d",cancelButton:"\u4e0d\u7528\u4e86",confirm:function(){var t=e.expertName,n="/feedbacks?text="+encodeURIComponent("\u4f60\u597d\uff0c\u6211\u60f3\u9884\u7ea6\u54a8\u8be2\u5e08"+t+"\uff0c\u8bf7\u4f60\u5e2e\u6211\u534f\u8c03\u4e00\u4e0b\u5408\u9002\u7684\u65f6\u95f4\uff0c\u8c22\u8c22~\u6211\u5e0c\u671b\u53ef\u4ee5\u9884\u7ea6\u5230\u7684\u65f6\u95f4\u662f\uff1a");Turbolinks.visit(n)},cancel:function(){history.back()}}):$body.find(".jd-order-step-box").length?$.confirm({content:"\u786e\u5b9a\u653e\u5f03\u9884\u7ea6\uff1f",confirmButton:"\u786e\u5b9a",cancelButton:"\u53d6\u6d88",confirm:function(){history.back()}}):history.back():"/listening"===e.location.pathname?Turbolinks.visit("/"):J.remote.get("page_info",{url:e.location.href,v:"20180412"}).then(function(e){if(e.data.back)$.confirm({title:e.data.back.modal.title||e.data.back.modal.content,content:e.data.back.modal.content||e.data.back.modal.title,confirmButton:e.data.back.modal.confirm_text,cancelButton:e.data.back.modal.cancel_text,confirm:function(){"open_page"!==e.data.back.modal.confirm_actions[0].action?t&&""!==t&&null!==t&&"#"!==t.substring(0,1)?Turbolinks.visit(t):history.length>1&&env.referrer?history.back():Turbolinks.visit("/"):Turbolinks.visit(e.data.back.modal.confirm_actions[0].data.value)}});else{if(t&&""!==t&&null!==t&&"#"!==t.substring(0,1))return void Turbolinks.visit(t);history.length>1&&env.referrer||history.length>1&&env.development?history.back():Turbolinks.visit("/")}return e})}),Turbolinks.replace_body=function(t){J.trigger("page.before-load"),html=decodeURIComponent(t),/<(html|body)/i.test(html)?(doc=document.documentElement.cloneNode(),doc.innerHTML=html):(doc=document.documentElement.cloneNode(!0),doc.querySelector("body").innerHTML=html),doc.head=doc.querySelector("head"),doc.body=doc.querySelector("body"),document.body=doc.body,e.scrollTo(0,0),document.dispatchEvent(new Event("turbolinks:load"))},$document.ajaxError(function(e,t){Vue.prototype.$browser.app&&"undefined"!=typeof Smileback&&App.http_error(t.status)}),$document.on("click","a[rel=iframe]",function(e){return e.preventDefault(),Turbolinks.visit("/iframe?src=".concat(escape(this.href))),!1}),Turbolinks.BrowserAdapter.prototype._visitStarted=Turbolinks.BrowserAdapter.prototype.visitStarted,Turbolinks.BrowserAdapter.prototype.visitStarted=function(e){Vue.prototype.$browser.wechat?"replace"==e.action?location.replace(e.location.requestURL):location.href=e.location.requestURL:Turbolinks.BrowserAdapter.prototype._visitStarted(e)}}(window),function(e){var t={};if(t.production=location.hostname.indexOf("jiandanxinli.com")>=0,t.test=location.hostname.indexOf("example.com")>=0,t.development=!t.production&&!t.test,t.app={www:location.hostname.indexOf("www")>=0,uni:location.hostname.indexOf("uni")>=0,admin:location.hostname.indexOf("admin")>=0},t.app.assets="/",t.production&&(t.app.assets="//assets-1251943848.file.myqcloud.com/"),t.app.api="/api/v1/",t.production?t.app.log_channel="ProductionWebLog":t.app.log_channel="TestingWebLog",t.session=null,t.referrer=document.referrer,t.cached_pages={},t.pages_list=[],Vue.prototype.$browser.wechat)if(sessionStorage.getItem("pages_list")){var n=JSON.parse(sessionStorage.getItem("pages_list"));n.push({path_name:location.pathname,used:!1}),sessionStorage.setItem("pages_list",JSON.stringify(n))}else sessionStorage.setItem("pages_list",JSON.stringify([{path_name:location.pathname,used:!1}]));J.on("page.before-cache.env.cache_page",function(){var n=$body[0].dataset.cache_id||J.id("page_");$body[0].dataset.cache_id=n,t.cached_pages[n]={position:{x:e.pageXOffset,y:e.pageYOffset}},$("audio,video").length&&(t.cached_pages[n].media={},$("audio,video").each(function(){var e=J.id("media_");t.cached_pages[n].media[e]={type:this.tagName,currentTime:this.currentTime,paused:this.paused},this.pause(),this.dataset.cache_id=e}))},{sync:!0}),J.on("page.load",function(){t.app.admin||(t.pages_list.push({path_name:location.pathname,used:!1}),$("audio,video").length&&$body[0].dataset.cache_id&&J.each(t.cached_pages[$body[0].dataset.cache_id].media,function(e,t){var n=$("".concat(t.type,"[data-cache_id=").concat(e,"]"));n.one("canplay",function(){n[0].currentTime=t.currentTime,t.paused||n[0].play()})}),$body.hasClass("authentication")||Vue.prototype.$cookie("redirect_uri",location.pathname+location.search))}),J.on("env.session.updated",function(){(!Vue.prototype.$userId()&&Vue.prototype.$cookie("sign_in")&&Vue.prototype.$cookie("sign_in",null),Vue.prototype.$userId())&&(e.localStorage.userid?JSON.parse(e.localStorage.userid)!==Vue.prototype.$userId()&&(localStorage.removeItem("form_order_fields"),localStorage.removeItem("order_counseling_form"),localStorage.removeItem("order_counseling_data"),localStorage.removeItem("userid")):localStorage.setItem("userid",Vue.prototype.$userId()));Vue.prototype.$userId()?(null===J.socket.instance&&J.socket.connect(),-1===J.socket.subscribed.indexOf("UsersChannel")&&J.socket.subscribe("UsersChannel")):J.socket.instance&&J.socket.close()}),t.restore_position=function(){var n=$body[0].dataset.cache_id;n&&t.cached_pages[n]&&e.scrollTo(t.cached_pages[n].position.x,t.cached_pages[n].position.y)},e.env=t,t.app.admin||Vue.prototype.$fetchJSON("/api/v1/session").then(function(e){return e&&e.meta&&e.meta.session&&(t.session=e.meta.session,J.trigger("env.session.updated")),e})}(window),function(e){if(env.development||env.test||env.app.admin)return e.sa={track:function(){}},void(e.gtag=function(){});!function(t){try{var n=t.sdk_url,a=t.name,o=e,i=document,r="script",s=null,c=null;o.sensorsDataAnalytic201505=a,o[a]&&o[a].register||(o[a]=function(e){return function(){(o[a]._q=o[a]._q||[]).push([e,arguments])}});for(var l=["track","quick","register","registerPage","registerOnce","registerSession","registerSessionOnce","trackSignup","trackAbtest","setProfile","setOnceProfile","appendProfile","incrementProfile","deleteProfile","unsetProfile","identify","login","logout","clearAllRegister"],d=0;d<l.length;d++)o[a][l[d]]=o[a].call(null,l[d]);o[a]._t||(s=i.createElement(r),c=i.getElementsByTagName(r)[0],s.async=1,s.src=n,c.parentNode.insertBefore(s,c),o[a]._t=1*new Date,o[a].para=t)}catch(u){console.error(u)}}({sdk_url:"".concat(env.app.assets,"assets-plugins/sensorsdata.js?_=").concat($.timestamp),name:"sa",server_url:env.production?"https://po.jiandanxinli.com/release/log-collectors/sa.gif?project=sa":"/sa.gif?project=sa",web_url:env.production?"https://po.jiandanxinli.com/release/log-collectors/sa.gif?project=sa":"/sa.gif?project=sa",heatmap:{isTrackLink:!1},show_log:env.development});try{sa.register({user_agent:navigator.userAgent}),J.on("env.session.updated.sa",function(){env.session.distinct_id&&sa.store&&sa.store.getDistinctId()!=env.session.distinct_id&&(/[a-z]/i.test(env.session.distinct_id)?sa.identify(env.session.distinct_id,!0):sa.login(env.session.distinct_id))}),J.on("page.load.sa",function(){sa.registerPage({$url:location.toString(),$url_path:location.pathname,$title:document.title}),env.production&&gtag("config","GA_TRACKING_ID",{page_path:location.pathname}),sa.quick("autoTrackSinglePage")},{sync:!0}),J.on("page.before-cache.sa",function(){env.referrer!=location.toString()&&""!==location.toString()&&(env.referrer=location.toString()),sa.registerPage({$referrer:env.referrer})},{sync:!0});var t=function(e,t,a){e&&"undefined"!=typeof e.tagName&&(a["".concat(t,"name")]=e.tagName.toLowerCase(),$.each(["id","className","name","type","alt"],function(n,o){e[o]&&""!==e[o]&&(a["".concat(t,"name")]+="[".concat(o,"=").concat(e[o],"]"))}),e.src&&""!==e.src&&(a["".concat(t,"src")]=e.src),""!==e.innerText&&(a["".concat(t,"text")]=e.innerText.substring(0,50)),e.href&&""!==e.href&&(a["".concat(t,"href")]=e.href),a["".concat(t,"xpath")]=n(e).join(">"))},n=function(e){for(var t=[];null!=e.parentNode;){for(var n=0,a=0,o=0;o<e.parentNode.childNodes.length;o++){var i=e.parentNode.childNodes[o];i.nodeName==e.nodeName&&(i===e&&(a=n),n++)}n>1?t.unshift(e.nodeName.toLowerCase()+":eq("+a+")"):t.unshift(e.nodeName.toLowerCase()),e=e.parentNode}return t.slice(1)};e.addEventListener("click",function(e){var n={};t(e.target,"",n);var a=$(e.target).parent("a")[0]||$(e.target).parent("form")[0]||$(e.target).parent();t(a,"parent_",n),sa.track("click",n)},!0),J.each(["ended","pause","play","seeked"],function(e,n){document.addEventListener(n,function(e){var a={action:n,duration:e.target.currentTime};t(e.target,"",a),sa.track("media",a),gtag("event","media_"+n,{src:e.target.src,duration:e.target.currentTime})},!0)})}catch(a){console.error(a)}}(window),function(e){e.Api={get:function(e,t){return Api.request("get",e,t)},post:function(e,t){return Api.request("post",e,t)},patch:function(e,t){return Api.request("patch",e,t)},"delete":function(e,t){return Api.request("delete",e,t)},request:function(e,t,n){var a=$.Deferred(),o=a.promise(),i={type:e,url:t,dataType:"json",data:n};return"/"!==i.url.substring(0)&&"http"!==i.url.substring(0,4)&&(i.url=env.app.api+i.url),i.url.indexOf(location.host)>=0&&(i.url=i.url.replace(new RegExp("http(s)?://"+location.host),"")),i.success=function(e,t,n){e&&e.errors?a.rejectWith(n,[e,t]):a.resolveWith(n,[e,t])},i.error=function(e){a.rejectWith(e,[e.responseJSON,e.status])},$.ajax(i),o.then(Api.on_done,Api.on_fail),o},on_done:function(e){return e&&e.meta&&e.meta.session&&(env.session=e.meta.session,J.trigger("env.session.updated")),e},on_fail:function(e){if(!e||!e.errors)throw"".concat(this.url," failed!");switch(e.errors.code){case 100:$("body").find(".js-error").length>0?$(".js-error .j-alert-content").text(e.errors.detail):$("body").append($('<div class="j-alert j-alert-error j-alert-fixed js-error"><div class="j-alert-icon j-alert-icon-error"></div><div class="j-alert-content">'+e.errors.detail+'</div><div class="j-alert-close"></div></div>'));break;case 401:Vue.prototype.$browser.app&&"undefined"!=typeof Smileback?App.http_error(e.errors.code):env.app.uni||Turbolinks.visit("/sign_up");break;default:throw"".concat(this.url," failed!")}return e}}}(window),function(e,t){var n={experts:{tags:["load-more","mask","experts-topbar","slider","slider-button"]},feedbacks:{plugins:["fileupload"],tags:["load-more"]},question:{tags:["load-more","question-answer","question-answer-head","question-answer-comment"],plugins:["strftime"]},testing_result:{tags:["testing_result_head","testing_result_single","testing_result__regret","testing_result_rely","testing_result_relationship","testing_result_perfect"],plugins:["echarts"]},recharge:{plugins:["pingxx"]},"uni-home":{tags:["header","banners","load-more"]},course:{tags:["header","back-to-top"],plugins:["strftime"]},landing_page:{tags:["header"]},"iframe-page":{tags:["header"]},broadcast:{tags:["header","load-more"]},live_app:{tags:["header"]},conversation_users:{tags:["load-more"],plugins:["strftime"]},conversation_user:{tags:["load-more","audio_player_muse"],plugins:["strftime","fileupload"]},conversation_user_admin:{tags:["load-more"],plugins:["fileupload","strftime"]},order_counseling:{tags:["kalendar","order_counseling_form","form","ui_picker","ui_toast"]},comments:{tags:["comment","load-more"],plugins:["strftime"]},emotional_training_camp:{tags:["load-more","ui_toast"],plugins:["pinchZoom"]},emotional_training_camp_v2:{tags:["ui_toast"],plugins:["pinchZoom"]},"audio-player":{tags:["default_audio_player","app_audio_player"]},"complex-rate":{plugins:["echarts"]},upload_img:{plugins:["cropper"]},upload_work:{plugins:["fileupload"]},admin_target:{tags:["admin_table","admin_chart"],plugins:["echarts","moment"]},admin_target2:{tags:["admin_table2","admin_g2"],plugins:["g2"]},safety_verification:{tags:["keyboard","ui_toast"]},"user-home-account-binding":{tags:["ui_toast"]},expert_2017:{plugins:["echarts"]},course_order:{tags:["load-more"]},categories:{tags:["ui_loading"]},embrace:{tags:["ui_toast"]},selfhelp_home:{tags:["selfhelp_list","scroll","avatar_header"]},selfhelp_process:{tags:["avatar_header","next_button","ui_toast","training_audio"]},selfhelp_user_target:{tags:["selfhelp_list","scroll","avatar_header","ui_toast"]},learn_content_btn:{tags:["ai_badge","learns_popup"]},activity_testing:{tags:["ui_swiper","ui_toast"]},group_buying_list:{tags:["group_buying_item","ui_loading","ui_countdown"]},group_buying_show:{tags:["ui_loading","ui_countdown","pay_modal","promo_modal"]},pay_modal:{tags:["promo_modal","ui_loading","ui_toast"],plugins:["jconfirm"]},activity_phonenum:{tags:["ui_toast"]},yield_container:{tags:["training_audio"]},course_list:{tags:["ui_toast"]},"reservation-subscriber":{tags:["ui_modal","ui_toast"]},activity_lvjing:{tags:["ui_swiper","ui_toast"]},expert_show_button:{tags:["vue-favourite-button","reservation-subscriber","ui_toast","ui_modal"]},book:{tags:["book_tag"]},book_list:{tags:["book_list_tag"]},learn_content_bottom_button:{tags:["learn_content_btn","ai_badge","learns_popup"]}};t.settings.brackets="{{ }}";var a=Function;this.Function=function(){try{return a.apply(this,arguments)}catch(e){throw e+": "+Array.prototype.slice.call(arguments).join(", ")}},t._mount=t.mount,t.mount=function(e){if(null==e&&(e="*"),"*"===e)var a=document.querySelectorAll("div[data-tag]");else a=document.querySelectorAll("div[data-tag=".concat(e,"]"));var o=$.Deferred(),i=[];return t.tags={},$.each(a,function(e,a){if(!a.dataset.mounted){a.dataset.mounted=!0;var o=a.dataset.tag;if(n[o]){var r=[J.getTag(o)];n[o].tags&&$.each(n[o].tags,function(e,t){r.push(J.getTag(t))}),n[o].plugins&&$.each(n[o].plugins,function(e,t){r.push(J.getPlugin(t))}),i.push($.when.apply($,r).done(function(){!a.dataset.cache_id&&a.dataset.opts?t.tags[o]=t._mount(a,o,$.parseJSON(a.dataset.opts))[0]:t.tags[o]=t._mount(a,o)[0]}))}else i.push(J.getTag(o).then(function(){!a.dataset.cache_id&&a.dataset.opts?t.tags[o]=t._mount(a,o,$.parseJSON(a.dataset.opts))[0]:t.tags[o]=t._mount(a,o)[0]}))}}),$.when.apply($,i).then(function(){o.resolve()},function(){o.reject()}),o.promise()},t._cached_data={},t.fetch_cache=function(e){return!!t._cached_data[e.root.dataset.cache_id]&&($.extend(e.data,t._cached_data[e.root.dataset.cache_id]),e.data.fetched_cache=!0,delete t._cached_data[e.root.dataset.cache_id],!0)},J.on("page.load.riot",function(){t.mount().then(function(){env.restore_position()})}),J.on("page.before-cache.riot",function(){var e=t.util.vdom.slice();J.each(e,function(e,n){if(!n.root.dataset.turbolinksPermanent){var a=J.id(n.root.dataset.tag);t._cached_data[a]=n.data,n.root.dataset.cache_id=a,delete n.root.dataset.mounted,n.unmount(!0)}})},{sync:!0});var o=function(e,t,n,a){var o={},i=!0;return o[t]={},$.each(n["".concat(a,"_").concat(t,"_attributes")],function(n,r){var s=e.refs["".concat(a,"_").concat(t,".").concat(n)],c=null;if(s)switch(s.tagName){case"INPUT":case"TEXTAREA":default:switch(s.type){case"checkbox":c=s.checked;break;default:c=s.value}}else c=r["default"];if(r.required&&(null===c||""===$.trim(c)))return $.toast("\u8bf7\u8f93\u5165".concat(r.name,"~")),i=!1,!1;o[t][n]=c}),{valid:i,data:o}};t.restful=function(e,t,n){if(!e)throw"Missing tag!";if(!t)throw"Missing data!";if(!n)throw"Missing config!";if(!n.model_name)throw"Missing model_name!";if(!n.actions)throw"Missing actions!";var a=n.model_name[0],i=n.model_name[1];if(n.actions.indexOf("index")>=0&&(t[i]=[],t["".concat(i,"_next_link")]=null,t["".concat(i,"_loading")]=!0,t["".concat(i,"_abilities")]={create:!1,update:!1,destroy:!1},e["".concat(i,"_load_next")]=function(){return Vue.prototype.$fetchJSON(t["".concat(i,"_next_link")]).then(e["".concat(i,"_loaded_done")],e["".concat(i,"_loaded_fail")])},e["".concat(i,"_loaded_done")]=function(n){return n.meta&&n.meta.abilities&&(t["".concat(i,"_abilities")]=n.meta.abilities),n.data[0]&&n.data[0].id?$.each(n.data,function(e,n){$.findIndex(t[i],{id:n.id})<0&&t[i].push(n)}):t[i]=t[i].concat(n.data),t["".concat(i,"_loading")]=!1,t["".concat(i,"_next_link")]=n.links.next||null,e.update(),e.trigger("".concat(i,"_loaded.done")),n},e["".concat(i,"_loaded_fail")]=function(n){return t["".concat(i,"_loading")]=!1,e.update(),e.trigger("".concat(i,"_loaded.fail")),n}),n.actions.indexOf("new")>=0&&(t["newing_".concat(a)]=!1,e["show_new_".concat(a)]=function(){t["newing_".concat(a)]=!0,e.update()},e["hide_new_".concat(a)]=function(){t["newing_".concat(a)]=!1,e.update()}),n.actions.indexOf("create")>=0){if(!n["create_".concat(a,"_attributes")])throw"Missing create_".concat(a,"_attributes!");t["create_".concat(a,"_attributes")]=n["create_".concat(a,"_attributes")],t["creating_".concat(a)]=!1,e["create_".concat(a)]=function(){if(!t["creating_".concat(a)]){var i=o(e,a,n,"create");i.valid&&(t["creating_".concat(a)]=!0,e.update(),Api.post(n.model_name[1],i.data).then(e["created_".concat(a,"_done")],e["created_".concat(a,"_fail")]))}},e["created_".concat(a,"_done")]=function(o){return $.each(n["create_".concat(a,"_attributes")],function(t,n){var o=e.refs["create_".concat(a,".").concat(t)];if(o)switch(o.tagName){case"INPUT":case"TEXTAREA":default:switch(o.type){case"checkbox":o.checked=n["default"];break;default:o.value=n["default"]}}}),t[i]&&t[i].push(o.data),t["newing_".concat(a)]&&(t["newing_".concat(a)]=!1),t["creating_".concat(a)]=!1,e.update(),e.trigger("created_".concat(a,"_done"),o),o},
e["created_".concat(a,"_fail")]=function(n){return t["creating_".concat(a)]=!1,e.update(),e.trigger("created_".concat(a,"_fail"),n),n}}if(n.actions.indexOf("show")>=0&&(e["".concat(a,"_loaded_done")]=function(n){return t[a]=n.data,e.update(),e.trigger("".concat(a,"_loaded_done"),n),n},e["".concat(a,"_loaded_fail")]=function(t){return e.trigger("".concat(a,"_loaded_fail"),t),t}),n.actions.indexOf("edit")>=0&&(t["editing_".concat(a)]=!1,e["show_edit_".concat(a)]=function(){return t["editing_".concat(a)]=!0,e.update(),json},e["hide_edit_".concat(a)]=function(){return t["editing_".concat(a)]=!1,e.update(),json}),n.actions.indexOf("update")>=0){if(!n.model_id)throw"Missing model_id!";if(!n["update_".concat(a,"_attributes")])throw"Missing update_".concat(a,"_attributes!");t["update_".concat(a,"_attributes")]=n["update_".concat(a,"_attributes")],t["updating_".concat(a)]=!1,e["update_".concat(a)]=function(){if(!t["updating_".concat(a)]){var i=o(e,a,n,"update");if(i.valid)return t["updating_".concat(a)]=!0,e.update(),Api.patch("".concat(n.model_name[1],"/").concat(n.model_id),i.data).then(e["updated_".concat(a,"_done")],e["updated_".concat(a,"_fail")])}},e["updated_".concat(a,"_done")]=function(n){return t["editing_".concat(a)]&&(t["editing_".concat(a)]=!1),t["updating_".concat(a)]=!1,e.update(),e.trigger("updated_".concat(a,"_done"),n),n},e["updated_".concat(a,"_fail")]=function(n){return t["updating_".concat(a)]=!1,e.update(),e.trigger("updated_".concat(a,"_fail"),n),n}}if(n.actions.indexOf("destroy")>=0){if(!n.model_id)throw"Missing model_id!";t["destroying_".concat(a)]=!1,e["destroy_".concat(a)]=function(){t["destroying_".concat(a)]||$.confirm({title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",confirm:function(){t["destroying_".concat(a)]=!0,e.update(),Api["delete"]("".concat(n.model_name[1],"/").concat(n.model_id)).then(e["destroyed_".concat(a,"_done")],e["destroyed_".concat(a,"_fail")])}})},e["destroyed_".concat(a,"_done")]=function(n){return t["destroying_".concat(a)]=!1,e.update(),e.trigger("destroyed_".concat(a,"_done")),n},e["destroyed_".concat(a,"_fail")]=function(n){return t["destroying_".concat(a)]=!1,e.update(),e.trigger("destroyed_".concat(a,"_fail")),n}}return e},t.html_safe=function(e,t){return e&&(e=e.replace(/({|})/g,"")),t&&t.nr2br&&(e=e.replace(/\n/g,"<br>")),e},t.tag("raw","<span></span>",function(e){this.on("mount",function(){this.trigger("update")}),this.on("update",function(){e.html?this.root.childNodes[0].innerHTML=e.html:this.root.childNodes[0].innerHTML=null})}),t.time=function(e,t){function n(e){return e<10?"0"+e:e}var a,o=(new Date).getDate(),i=(new Date).getFullYear(),r=new Date(1e3*e),s=r.getFullYear(),c=r.getMonth()+1,l=r.getDate(),d=r.getHours(),u=r.getMinutes(),f=r.getSeconds();return"comment"==t?a=o===l&&i===s?n(d)+":"+n(u):o!==l&&i===s?c+"\u6708"+l+"\u65e5":s+"\u5e74"+c+"\u6708"+l+"\u65e5":"full"==t&&(a=s+"\u5e74"+c+"\u6708"+l+"\u65e5 "+n(d)+":"+n(u)+":"+n(f)),a}}(window,riot),window.Wechat={inited:!1,init:function(){if(!Wechat.inited&&(Vue.prototype.$browser.miniprogram="miniprogram"===window.__wxjs_environment,Vue.prototype.$browser.miniprogram))return document.getElementsByTagName("body")[0].className.indexOf("miniprogram")<0&&(document.getElementsByTagName("body")[0].className+=" miniprogram"),Wechat.inited=!0,void J.trigger("page.ready");Vue.prototype.$fetchJSON("/api/v1/wechat_token?url="+escape(location.href.split("#")[0])).then(function(e){wx.config($.extend(e.data,{debug:!1,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone","hideMenuItems"]})),wx.ready(function(){var e=$body.data("image");e?(0!==e.indexOf("http")&&(e="https:"+e),wx.onMenuShareTimeline({title:$body.data("title"),link:$body.data("link"),imgUrl:e,success:function(){sa.track("share",{user_agent:navigator.userAgent,$url:location.toString(),$url_path:location.pathname,$referrer:env.referrer,$title:document.title,channel:"\u5fae\u4fe1\u670b\u53cb\u5708",title:$body.data("title"),url:$body.data("link"),image:e,result:"\u6210\u529f"}),gtag("share",{method:"Wechat",event_action:"\u670b\u53cb\u5708",content_id:$body.data("link")}),J.trigger("wechat.share",{result:"success",event:"onMenuShareTimeline"})},cancel:function(){sa.track("share",{user_agent:navigator.userAgent,$url:location.toString(),$url_path:location.pathname,$referrer:env.referrer,$title:document.title,channel:"\u5fae\u4fe1\u670b\u53cb\u5708",title:$body.data("title"),url:$body.data("link"),image:e,result:"\u53d6\u6d88"}),J.trigger("wechat.share",{result:"cancel",event:"onMenuShareTimeline"})}}),wx.onMenuShareAppMessage({title:$body.data("title"),desc:$body.data("content"),link:$body.data("link"),imgUrl:e,success:function(){sa.track("share",{user_agent:navigator.userAgent,$url:location.toString(),$url_path:location.pathname,$referrer:env.referrer,$title:document.title,channel:"\u5fae\u4fe1\u597d\u53cb",title:$body.data("title"),description:$body.data("content"),url:$body.data("link"),image:e,result:"\u6210\u529f"}),gtag("share",{method:"Wechat",event_action:"\u597d\u53cb",content_id:$body.data("link")}),J.trigger("wechat.share",{result:"success",event:"onMenuShareAppMessage"})},cancel:function(){sa.track("share",{user_agent:navigator.userAgent,$url:location.toString(),$url_path:location.pathname,$referrer:env.referrer,$title:document.title,channel:"\u5fae\u4fe1\u597d\u53cb",title:$body.data("title"),description:$body.data("content"),url:$body.data("link"),image:e,result:"\u53d6\u6d88"}),J.trigger("wechat.share",{result:"cancel",event:"onMenuShareAppMessage"})}}),wx.onMenuShareQQ({title:$body.data("title"),desc:$body.data("content"),link:$body.data("link"),imgUrl:e,success:function(){sa.track("share",{user_agent:navigator.userAgent,$url:location.toString(),$url_path:location.pathname,$referrer:env.referrer,$title:document.title,channel:"\u5fae\u4fe1\u5206\u4eab\u5230QQ",title:$body.data("title"),description:$body.data("content"),url:$body.data("link"),image:e,result:"\u6210\u529f"}),gtag("share",{method:"Wechat",event_action:"QQ",content_id:$body.data("link")}),J.trigger("wechat.share",{result:"success",event:"onMenuShareQQ"})},cancel:function(){sa.track("share",{user_agent:navigator.userAgent,$url:location.toString(),$url_path:location.pathname,$referrer:env.referrer,$title:document.title,channel:"\u5fae\u4fe1\u5206\u4eab\u5230QQ",title:$body.data("title"),description:$body.data("content"),url:$body.data("link"),image:e,result:"\u53d6\u6d88"}),J.trigger("wechat.share",{result:"cancel",event:"onMenuShareQQ"})}}),wx.onMenuShareQZone({title:$body.data("title"),desc:$body.data("description"),link:$body.data("url"),imgUrl:e,success:function(){sa.track("share",{user_agent:navigator.userAgent,$url:location.toString(),$url_path:location.pathname,$referrer:env.referrer,$title:document.title,channel:"\u5fae\u4fe1\u5206\u4eab\u5230QQ\u7a7a\u95f4",title:$body.data("title"),description:$body.data("content"),url:$body.data("link"),image:e,result:"\u6210\u529f"}),gtag("share",{method:"Wechat",event_action:"QQ\u7a7a\u95f4",content_id:$body.data("link")}),J.trigger("wechat.share",{result:"success",event:"onMenuShareQZone"})},cancel:function(){sa.track("share",{user_agent:navigator.userAgent,$url:location.toString(),$url_path:location.pathname,$referrer:env.referrer,$title:document.title,channel:"\u5fae\u4fe1\u5206\u4eab\u5230QQ\u7a7a\u95f4",title:$body.data("title"),description:$body.data("content"),url:$body.data("link"),image:e,result:"\u53d6\u6d88"}),J.trigger("wechat.share",{result:"cancel",event:"onMenuShareQZone"})}})):wx.hideMenuItems({menuList:["menuItem:share:appMessage","menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:share:facebook"]}),J.trigger("page.ready")}),wx.error(function(e){throw"Wechat js sdk error: "+JSON.stringify(e)})});var e=document.querySelector("body.wechat");e.style.top=e?"43px":"0px"}},Vue.prototype.$browser.wechat&&(document.addEventListener("WeixinJSBridgeReady",Wechat.init,!1),J.on("page.load.wechat",function(){Wechat.init()})),J.on("page.load.ckeditor",function(){document.querySelectorAll("textarea.rich").length>0&&J.getPlugin("ckeditor")}),J.on("page.load.jconfirm",function(){J.getPlugin("jconfirm")}),J.on("page.load.echarts",function(){$(".echart_div").length&&J.getPlugin("echarts").then(function(){echarts.mount()})}),Vue.prototype.$browser.app&&J.getPlugin("app"),J.on("page.load.jquery.dom",function(){$("iframe").length&&$("iframe").each(function(){var e=$(this);e.height(.6*e.width())})}),function(e,t){"use strict";var n;e.rails!==t&&e.error("jquery-ujs has already been loaded!");var a=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return e("meta[name=csrf-token]").attr("content")},csrfParam:function(){return e("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=n.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){e('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(t,n,a){var o=e.Event(n);return t.trigger(o,a),!1!==o.result},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==t&&!1!==e.data("remote")},handleRemote:function(a){var o,i,r,s,c,l;if(n.fire(a,"ajax:before")){if(s=a.data("with-credentials")||null,c=a.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,a.is("form")){o=a.data("ujs:submit-button-formmethod")||a.attr("method"),i=a.data("ujs:submit-button-formaction")||a.attr("action"),r=e(a[0]).serializeArray();var d=a.data("ujs:submit-button");d&&(r.push(d),a.data("ujs:submit-button",null)),a.data("ujs:submit-button-formmethod",null),a.data("ujs:submit-button-formaction",null)}else a.is(n.inputChangeSelector)?(o=a.data("method"),i=a.data("url"),r=a.serialize(),a.data("params")&&(r=r+"&"+a.data("params"))):a.is(n.buttonClickSelector)?(o=a.data("method")||"get",i=a.data("url"),r=a.serialize(),a.data("params")&&(r=r+"&"+a.data("params"))):(o=a.data("method"),i=n.href(a),r=a.data("params")||null);return l={type:o||"GET",data:r,dataType:c,beforeSend:function(e,o){if(o.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),!n.fire(a,"ajax:beforeSend",[e,o]))return!1;a.trigger("ajax:send",e)},success:function(e,t,n){a.trigger("ajax:success",[e,t,n])},complete:function(e,t){a.trigger("ajax:complete",[e,t])},error:function(e,t,n){a.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(i)},s&&(l.xhrFields={withCredentials:s}),i&&(l.url=i),n.ajax(l)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(a){return!0}},handleMethod:function(a){var o=n.href(a),i=a.data("method"),r=a.attr("target"),s=n.csrfToken(),c=n.csrfParam(),l=e('<form method="post" action="'+o+'"></form>'),d='<input name="_method" value="'+i+'" type="hidden" />';c===t||s===t||n.isCrossDomain(o)||(d+='<input name="'+c+'" value="'+s+'" type="hidden" />'),r&&l.attr("target",r),l.hide().append(d).appendTo("body"),l.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,a;n=e.is("button")?"html":"val",(a=e.data("disable-with"))!==t&&(e.data("ujs:enable-with",e[n]()),e[n](a)),e.prop("disabled",!0),e.data("ujs:disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var n=e.is("button")?"html":"val";e.data("ujs:enable-with")!==t&&(e[n](e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.prop("disabled",!1),e.removeData("ujs:disabled")},allowAction:function(e){var t,a=e.data("confirm"),o=!1;if(!a)return!0;if(n.fire(e,"confirm")){try{o=n.confirm(a)}catch(i){(console.error||console.log).call(console,i.stack||i)}t=n.fire(e,"confirm:complete",[o])}return o&&t},blankInputs:function(t,n,a){var o,i,r,s=e(),c=n||"input,textarea",l=t.find(c),d={};return l.each(function(){(o=e(this)).is("input[type=radio]")?(r=o.attr("name"),d[r]||(0===t.find('input[type=radio]:checked[name="'+r+'"]').length&&(i=t.find('input[type=radio][name="'+r+'"]'),s=s.add(i)),d[r]=r)):(o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):!!o.val())===a&&(s=s.add(o))}),!!s.length&&s},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var a=e.data("disable-with");a!==t&&(e.data("ujs:enable-with",e.html()),e.html(a)),e.bind("click.railsDisable",function(e){return n.stopEverything(e)}),e.data("ujs:disabled",!0)},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable"),e.removeData("ujs:disabled")}},n.fire(a,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,a){e.crossDomain||n.CSRFProtection(a)}),e(window).on("pageshow.rails",function(){e(e.rails.enableSelector).each(function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableFormElement(t)}),e(e.rails.linkDisableSelector).each(function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableElement(t)})}),a.on("ajax:complete",n.linkDisableSelector,function(){n.enableElement(e(this))}),a.on("ajax:complete",n.buttonDisableSelector,function(){n.enableFormElement(e(this))}),a.on("click.rails",n.linkClickSelector,function(t){var a=e(this),o=a.data("method"),i=a.data("params"),r=t.metaKey||t.ctrlKey;if(!n.allowAction(a))return n.stopEverything(t);if(!r&&a.is(n.linkDisableSelector)&&n.disableElement(a),n.isRemote(a)){if(r&&(!o||"GET"===o)&&!i)return!0;var s=n.handleRemote(a);return!1===s?n.enableElement(a):s.fail(function(){n.enableElement(a)}),!1}return o?(n.handleMethod(a),!1):void 0}),a.on("click.rails",n.buttonClickSelector,function(t){var a=e(this);if(!n.allowAction(a)||!n.isRemote(a))return n.stopEverything(t);a.is(n.buttonDisableSelector)&&n.disableFormElement(a);var o=n.handleRemote(a);return!1===o?n.enableFormElement(a):o.fail(function(){n.enableFormElement(a)}),!1}),a.on("change.rails",n.inputChangeSelector,function(t){var a=e(this);return n.allowAction(a)&&n.isRemote(a)?(n.handleRemote(a),!1):n.stopEverything(t)}),a.on("submit.rails",n.formSubmitSelector,function(a){var o,i,r=e(this),s=n.isRemote(r);if(!n.allowAction(r))return n.stopEverything(a);if(r.attr("novalidate")===t)if(r.data("ujs:formnovalidate-button")===t){if((o=n.blankInputs(r,n.requiredInputSelector,!1))&&n.fire(r,"ajax:aborted:required",[o]))return n.stopEverything(a)}else r.data("ujs:formnovalidate-button",t);if(s){if(i=n.nonBlankInputs(r,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(r)},13);var c=n.fire(r,"ajax:aborted:file",[i]);return c||setTimeout(function(){n.enableFormElements(r)},13),c}return n.handleRemote(r),!1}setTimeout(function(){n.disableFormElements(r)},13)}),a.on("click.rails",n.formInputClickSelector,function(t){var a=e(this);if(!n.allowAction(a))return n.stopEverything(t);var o=a.attr("name"),i=o?{name:o,value:a.val()}:null,r=a.closest("form");0===r.length&&(r=e("#"+a.attr("form"))),r.data("ujs:submit-button",i),r.data("ujs:formnovalidate-button",a.attr("formnovalidate")),r.data("ujs:submit-button-formaction",a.attr("formaction")),r.data("ujs:submit-button-formmethod",a.attr("formmethod"))}),a.on("ajax:send.rails",n.formSubmitSelector,function(t){this===t.target&&n.disableFormElements(e(this))}),a.on("ajax:complete.rails",n.formSubmitSelector,function(t){this===t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery),function(e){var t=0,n=function(){return(new Date).getTime()+t++},a=function(e){return"["+e+"]$1"},o=function(e){return"_"+e+"_$1"},i=function(t,n,a){return t?"function"==typeof t?(n&&console.warn("association-insertion-traversal is ignored, because association-insertion-node is given as a function."),t(a)):"string"==typeof t?n?a[n](t):"this"==t?a:e(t):void 0:a.parent()};e(document).on("click",".add_fields",function(t){t.preventDefault();var r=e(this),s=r.data("association"),c=r.data("associations"),l=r.data("association-insertion-template"),d=r.data("association-insertion-method")||r.data("association-insertion-position")||"before",u=r.data("association-insertion-node"),f=r.data("association-insertion-traversal"),p=parseInt(r.data("count"),10),m=new RegExp("\\[new_"+s+"\\](.*?\\s)","g"),h=new RegExp("_new_"+s+"_(\\w*)","g"),g=n(),v=l.replace(m,a(g)),_=[];for(v==l&&(m=new RegExp("\\[new_"+c+"\\](.*?\\s)","g"),h=new RegExp("_new_"+c+"_(\\w*)","g"),v=l.replace(m,a(g))),_=[v=v.replace(h,o(g))],p=isNaN(p)?1:Math.max(p,1),p-=1;p;)g=n(),v=(v=l.replace(m,a(g))).replace(h,o(g)),_.push(v),p-=1;var b=i(u,f,r);b&&0!=b.length||console.warn("Couldn't find the element to insert the template. Make sure your `data-association-insertion-*` on `link_to_add_association` is correct."),e.each(_,function(t,n){var a=e(n),o=jQuery.Event("cocoon:before-insert");if(b.trigger(o,[a]),!o.isDefaultPrevented()){b[d](a);b.trigger("cocoon:after-insert",[a])}})}),e(document).on("click",".remove_fields.dynamic, .remove_fields.existing",function(t){var n=e(this),a=n.data("wrapper-class")||"nested-fields",o=n.closest("."+a),i=o.parent();t.preventDefault();var r=jQuery.Event("cocoon:before-remove");if(i.trigger(r,[o]),!r.isDefaultPrevented()){var s=i.data("remove-timeout")||0;setTimeout(function(){n.hasClass("dynamic")?o.remove():(n.prev("input[type=hidden]").val("1"),o.hide()),i.trigger("cocoon:after-remove",[o])},s)}}),e(document).on("ready page:load turbolinks:load",function(){e(".remove_fields.existing.destroyed").each(function(){var t=e(this),n=t.data("wrapper-class")||"nested-fields";t.closest("."+n).hide()})})}(jQuery),function(){$.fn.tap=function(e,t){return this.on("click",e,function(e){return $.proxy(t,this,e)()})},$.tap=function(e,t){return $document.tap(e,t)}}.call(this),function(){$.tap("[data-tab]",function(e){var t,n,a,o,i,r,s,c,l;if(e.preventDefault(),s="lastTab",(i=(n=$(this)).parent("[data-fixed]").data("id"))&&(s+=":"+i),!n.hasClass("active")){try{sessionStorage.setItem(s,n.index())}catch(d){d,console.log("\u65e0\u75d5\u6d4f\u89c8")}if(t=$("."+n.data("tab")).eq(n.index()),n.addClass("active").siblings().removeClass("active"),t.addClass("active").siblings().removeClass("active"),$(".expert-detail-main").length&&$("html, body").animate({scrollTop:$(".expert-detail-main").offset().top-40},300),$(".learns-tip").length?$("html, body").animate({scrollTop:$(".learns-tip").offset().top},100):$(".js-tabs-item.active").length&&(Vue.prototype.$browser.app||$("body").hasClass("miniprogram")?$("body").height()-window.innerHeight>=$(".js-tabs-item.active").offset().top-n.parent("[data-fixed]").height()?$("html, body").animate({scrollTop:$(".js-tabs-item.active").offset().top-n.parent("[data-fixed]").height()},100):$("html, body").animate({scrollTop:$("body").height()-window.innerHeight},100):$("body").height()+43-window.innerHeight>=$(".js-tabs-item.active").offset().top-n.parent("[data-fixed]").innerHeight()-$(".header").innerHeight()?$("html, body").animate({scrollTop:$(".js-tabs-item.active").offset().top-n.parent("[data-fixed]").innerHeight()-$(".header").innerHeight()},100):$("html, body").animate({scrollTop:$("body").height()+43-window.innerHeight},100)),$(".interact-box").length){for(l=[],o=0,c=(a=$(".interact-box")).length;o<c;o++)r=a[o],e=$(r),$(r).height()>78?(e.height(78),l.push(e.siblings(".interact-toggle-box").show())):l.push(void 0);return l}}})}.call(this),function(){$.fn.modal=function(){var e;if(!this.data("modal_binded"))return(e=this).on("modal.toggle",function(){var t;return e.hasClass("hidden")?($("body").addClass("modal-open"),(t=e.find("video:first")).length&&t[0].play()):($("body").removeClass("modal-open"),(t=e.find("video:first")).length&&t[0].pause()),e.toggleClass("hidden")}).on("modal.show",function(){var t;if(e.hasClass("hidden"))return $("body").addClass("modal-open"),(t=e.find("video:first")).length&&t[0].play(),e.removeClass("hidden")}).on("modal.hide",function(){var t;if(!e.hasClass("hidden"))return $("body").removeClass("modal-open"),(t=e.find("video:first")).length&&t[0].pause(),e.addClass("hidden")}).tap(".title .fa-close",function(){return e.trigger("modal.toggle")}).tap("a.close",function(){if(e.trigger("modal.toggle"),$(this).hasClass("shown-once"))return $($(this).data("modal-id")).remove()}),this.data("modal_binded",!0)},$.tap("[data-modal-target]",function(){var e,t;return t=$(this),(e=$(t.data("modal-target"))).modal(),e.trigger("modal.toggle")}),$unload(function(){return $(".modal:visible").trigger("modal.toggle")}),$loaded(function(){if($(".modal.hidden.auto-display").length>0)return $(".modal.hidden.auto-display").each(function(){var e;return(e=$(this)).modal(),e.trigger("modal.show")})}),$.tap("[data-license]",function(e){var t,n,a,o;return n=(a=$(this)).data("href"),o=a.data("title"),t="",e.preventDefault(),$.ajax({url:n,dataType:"html",success:function(e){return e="<div>"+e+"</div>",t=$(e).find(".js-license").length?$(e).find(".js-license").html():e,$(".jconfirm-box").css({margin:"44px auto 55px"}).find(".content").html(t)},error:function(){return $(".jconfirm-box .content").html("\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002")}}),$.alert({title:o,content:t,closeIcon:!0})}),$.tap("[data-agreement-preview]",function(e){return e.preventDefault(),J.remote.get("agreements/preview?template_id="+$(this).data("agreement-preview")).then(function(e){var t;return(t=$(".jconfirm-box")).find(".title").html(e.data.name),t.find(".content").html(e.data.content),t.css("margin-top",0)}),$.alert({title:"\u8f7d\u5165\u4e2d..",content:"\u8f7d\u5165\u4e2d..",closeIcon:!0})}),$.tap("[data-agreement-document-id]",function(e){return e.preventDefault(),J.remote.get("agreements/preview?document_id="+$(this).data("agreement-document-id")).then(function(e){var t;return(t=$(".jconfirm-box")).find(".title").html(e.data.name),t.find(".content").html(e.data.content),t.css("margin-top",0)}),$.alert({title:"\u8f7d\u5165\u4e2d..",content:"\u8f7d\u5165\u4e2d..",closeIcon:!0})}),window._alert=window.alert,window.alert=function(e,t){var n;return null==t&&(t="\u786e\u5b9a"),(n=$('<div class="modal"><div class="modal-dialog"><div class="title">'+e+'</div><div class="content"><button>'+t+"</button></div></div></div>").appendTo("body").modal()).tap("button",function(){return n.remove()})},$.rails.allowAction=function(e){var t;return!e.attr("data-confirm")||(t={},e.attr("data-confirm-title")?(t.title=e.attr("data-confirm-title"),t.content=e.attr("data-confirm")):t.title=e.attr("data-confirm"),t.confirm=function(){if(e.trigger("confirm:complete",!0),e.removeAttr("data-confirm"),e.trigger("click.rails"),e.attr("href")&&!e.attr("data-method"))return Turbolinks.visit(e.attr("href"))},$.confirm(t),!1)}}.call(this),function(){$document.on("page:change",function(){return $("a[data-timeout]").each(function(){var e,t;return e=$(this).addClass("disabled"),t=Number(e.data("timeout")),e.data("timeout",setInterval(function(){return 0===(t-=1)?(e.html(e.data("text")).removeClass("disabled"),clearInterval(e.data("timeout"))):e.html(t+"\u79d2\u540e\uff0c"+e.data("text"))},1e3))})})}.call(this),function(){$.tap("[data-toggle]",function(e){return e.preventDefault(),$(this).next().toggle()}),$.tap(".toggle .title",function(){return $(this).parent().toggleClass("active")}),$.tap('[data-toggle="#experts-filter"]',function(){var e;return(e=$(this)).find(".fa").toggleClass("fa-filter"),$(e.data("toggle")).toggleClass("small_hidden")}),$.tap('[data-slide="slide-down"]',function(){var e;return e=$(this),$("body").find("ul.jd-text-list__list").children(".active, .hidden").toggleClass("active hidden"),e.find(".fa").hasClass("fa-angle-down")?e.html('\u6536\u8d77<i class="fa fa-angle-up"></i>'):e.find(".fa").hasClass("fa-angle-up")?e.html('\u5c55\u5f00<i class="fa fa-angle-down"></i>'):e.toggleClass("up")}),$.tap("[data-show-more]",function(){var e,t,n,a;return a=(e=$(this)).find("span.text"),t=e.find("img.icon"),n=$("#"+e.data("show-more")),"\u5c55\u5f00\u66f4\u591a"===a.text()?a.text("\u6536\u8d77"):a.text("\u5c55\u5f00\u66f4\u591a"),t.toggleClass("show"),n.toggle()})}.call(this),function(){var e,t,n,a,o,i,r,s,c;($("body").hasClass("pages_home")||$("body").hasClass("pages_activity_baidu_zixun"))&&(i=$("#recom_experts .avatar-list"),s=$("#recom_experts .prev"),r=$("#recom_experts .next"),t=$("#recom_experts .desc"),a=0,e=208,o=i.children().length,n=Math.floor(o/2),(c=function(o){if(!1===i.is(":animated")){if(a+=o,$("body").hasClass("desktop")?i.animate({marginLeft:(-a-1)*e},600):i.animate({marginLeft:(-a-2)*e},600),i.children().eq(a+n).addClass("active").siblings().removeClass("active"),t.eq(a+n).show().siblings().hide(),a===-n)return s.addClass("disabled");if(a===n)return r.addClass("disabled");if(s.hasClass("disabled")&&s.removeClass("disabled"),r.hasClass("disabled"))return r.removeClass("disabled")}})(a),$.tap("#recom_experts .prev",function(){return c(-1)}),$.tap("#recom_experts .next",function(){return c(1)}))}.call(this),function(){var e;e=function(){var e,t,n;for(t in e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"})if(void 0!==e.style[t])return{end:n[t]};return!1},$.fn.emulateTransitionEnd=function(e){var t,n;return n=!1,t=this,$(this).one($.support.transition.end,function(){n=!0}),setTimeout(function(){n||$(t).trigger($.support.transition.end)},e),this},$(function(){$.support.transition=e()})}.call(this),function(){var e,t;(e=function(e,t){this.$element=$(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=t,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"===this.options.pause&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))}).DEFAULTS={interval:5e3,pause:"hover",wrap:!0},e.prototype.cycle=function(e){var t;return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),t=this.interval,$unload_once(function(){return clearInterval(t)}),this},e.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".carousel-item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},e.prototype.to=function(e){var t,n;if(n=this,t=this.getActiveIndex(),!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(e)}):t===e?this.pause().cycle():this.slide(e>t?"next":"prev",$(this.$items[e]))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&$.support.transition&&(this.$element.trigger($.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){if(!this.sliding)return this.slide("next")},e.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},e.prototype.slide=function(e,t){var n,a,o,i,r,s,c;if(n=this.$element.find(".carousel-item.active"),a=t||n[e](),s=this.interval,o="next"===e?"left":"right",r="next"===e?"first":"last",c=this,!a.length){if(!this.options.wrap)return;a=this.$element.find(".carousel-item")[r]()}return a.hasClass("active")?this.sliding=!1:(i=$.Event("slide.bs.carousel",{relatedTarget:a[0],direction:o}),this.$element.trigger(i),i.isDefaultPrevented()?void 0:(this.sliding=!0,s&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var e;(e=$(c.$indicators.children()[c.getActiveIndex()]))&&e.addClass("active")})),$.support.transition&&this.$element.hasClass("slide")?a[0]&&(a.addClass(e),a[0]&&a[0].offsetWidth,n.addClass(o),a.addClass(o),n.one($.support.transition.end,function(){a.removeClass([e,o].join(" ")).addClass("active"),n.removeClass(["active",o].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*n.css("transition-duration").slice(0,-1))):(n.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),s&&this.cycle(),this))},t=$.fn.carousel,$.fn.carousel=function(t){return this.each(function(){var n,a,o,i;return o=(n=$(this)).data("bs.carousel"),i=$.extend({},e.DEFAULTS,n.data(),"object"==typeof t&&t),a="string"==typeof t?t:i.slide,o||n.data("bs.carousel",o=new e(this,i)),"number"==typeof t?o.to(t):a?o[a]():i.interval?o.pause().cycle():void 0})},$.fn.carousel.Constructor=e,$.fn.carousel.noConflict=function(){return $.fn.carousel=t,this},$(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var t,n,a,o;return n=$(this),void 0,t=$(n.attr("data-target")||n.attr("href")),a=$.extend({},t.data(),n.data()),(o=n.attr("data-slide-to"))&&(a.interval=!1),t.carousel(a),(o=n.attr("data-slide-to"))&&t.data("bs.carousel").to(o),e.preventDefault()}),$loaded(function(){return $('[data-ride="carousel"]').each(function(){var e;return(e=$(this)).carousel(e.data())})})}.call(this),function(){$document.on("keypress","input,select",function(e){return 13!==e.keyCode}),$document.on("submit","form",function(){return $(this).find("button").prop("disabled",!0),!0}),$.tap("body.authentication form.container button",function(){return $(this).parent("form").find("[required]").each(function(){var e;if(!(e=$(this)).is(":checked")&&e.hasClass("form-agreement"))return $.alert({title:"\u8bf7\u9605\u8bfb\u5e76\u540c\u610f\u7b80\u5355\u5fc3\u7406\u7528\u6237\u670d\u52a1\u534f\u8bae"}),!1;if(""===e.val())switch(e.attr("class")){case"form-phone":return $.alert({title:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"}),!1;case"form-email":return $.alert({title:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}),!1;case"form-phone-or-email":return $.alert({title:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u6216\u90ae\u7bb1"}),!1;case"form-token":return $.alert({title:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"}),!1;case"form-password":return $.alert({title:"\u8bf7\u8f93\u5165\u5bc6\u7801"}),!1}})}),window.form_ajax=function(){var e,t,n,a,o;if(o="/api/v1"+$("form").attr("action"),t=(e=(n=$(this)).parent("form")).serialize(),a=e.attr("method"),!n.data("onOff"))return n.data("onOff",!0).addClass("disabled"),$.ajax({url:o,data:t,type:a,success:function(e){var t;return t=e.data||e.errors,$("#content_wrapper").before('<div class="j-alert j-alert-noborder"><div class="j-alert-content">\u63d0\u793a\uff1a'+(t.notice||t.title||"\u4fee\u6539\u6210\u529f")+"\u3002</div></div>"),setTimeout(function(){return n.data("onOff",!1).removeClass("disabled"),t.url?Turbolinks.visit(t.url,{action:"replace"}):t.notice||t.url||t.title?$(".j-alert.j-alert-noborder").remove():Turbolinks.visit(location.pathname+location.search,{action:"replace"})},1500)}})}}.call(this),window,Vue.prototype.$browser.desktop&&1==$(".form-flex").attr("data-id")&&document.addEventListener("turbolinks:load",function(){if(document.getElementsByClassName("j-form-fields")[0]){var e=document.createElement("div");e.className="form_fixed",
e.style.width=document.body.clientWidth+"px",document.getElementsByClassName("j-form")[0].appendChild(e);for(var t=document.getElementsByClassName("form_fixed_btn"),n=document.querySelectorAll(".j-form .form_fixed_btn"),a=0,o=t.length;a<o;a++)e.appendChild(t[a].cloneNode(!0));for(a=0;a<n.length;a++)n[a].remove()}}),function(){function e(e){$(".select-other").bind("input propertychange",function(){$(this).val().length>0?e.removeClass("disable"):e.addClass("disable")})}$(document).on("change","form.j-form select",function(){var e=$(this);if("nil"===e.val()&&e.data("other"))e.after($.unescape(e.data("other")));else{var t=e.next();t.hasClass("other")&&t.remove()}}).on("click","form.j-form input[type=radio]",function(){var e=$(this),t=e.parent().parent().children().last();"nil"===e.val()&&e.data("other")?t.hasClass("other")||e.parent().after($.unescape(e.data("other"))):t.hasClass("other")&&t.remove()}).on("click","form.j-form input[type=checkbox]",function(){var e=$(this);if("nil"===e.val()&&e.data("other")&&e.is(":checked"))e.parent().after($.unescape(e.data("other")));else{var t=e.parent().parent().find(".other"),n=e.parent().parent().find("input[data-other]");t.hasClass("other")&&!n.is(":checked")&&t.remove()}}).on("change","form.j-form .image_upload",function(){var e=$(this),t=new FormData;t.append("file",$(this).get(0).files[0]);$.ajax({url:"/form_respondents/upyun_data",async:!1,dataType:"json",type:"post",success:function(e){t.append("policy",e.policy),t.append("signature",e.signature)}}),$.ajax({url:"//v0.api.upyun.com/jdxl-img",method:"post",data:t,dataType:"json",processData:!1,cache:!1,contentType:!1,beforeSend:function(){e.prop("disabled",!0)},success:function(t){var n="//jdxl-img.b0.upaiyun.com"+t.url,a=e.parent();a.find("input[type=hidden]").val(n),a.find("img").prop("src",n).removeClass("hidden"),a.find("a").removeClass("hidden"),e.prop("disabled",!1)}})}).on("click","form.j-form .delete_image",function(){var e=$(this),t=e.parent();return e.addClass("hidden"),t.find("input[type=hidden]").val(""),t.find("img").addClass("hidden").prop("src",""),!1}).on("click","form.j-form .upload_encrypted_file",function(){var e=this;$.getPlugin("fileupload").done(function(){var t=$(e);t.fileupload({url:"/apis/upload_encrypted_file",dataType:"json",formData:{},paramName:"file",replaceFileInput:!1,start:function(){t.prop("disabled",!0)},done:function(e,n){t.parent().find("input[type=hidden]").val(n.result.value),t.siblings(".j-form-title").html('\u4e2a\u6848\u62a5\u544a<samll style="margin-left: 10px; font-size: 12px; color: #129994;">\u4e0a\u4f20\u6210\u529f\uff01</samll>'),t.prop("disabled",!1),t.fileupload("destroy")}})})}).on("click","form.j-form .repeat",function(e){e.preventDefault();var n=$(this);return n.before('<div class="j-form-field">'+$.unescape(n.data("html"))+'<div class="delete_repeat j-form-del">\u5220\u9664</div></div>'),t(),!1}).on("click","form.j-form .delete_repeat",function(){return $(this).parent().remove(),!1}).on("click","form.j-form .delete_input",function(){return $(this).parent().remove(),!1}).on("click",".j-form-select",function(){var e=$(this);if(!e.hasClass("disable"))return e.hasClass("active")?(e.find(".j-form-select-option-container").hide(),e.removeClass("active")):(e.find(".j-form-select-option-container").show(),e.addClass("active")),!1}).on("click",".j-form-select-option-container",function(e){e.stopPropagation();var t=$(this),n=t.parents(".j-form-select");return n.hasClass("active")&&(t.hide(),n.removeClass("active")),!1}).on("click","body",function(){$.each($(".j-form-select"),function(){$(this).hasClass("active")&&($(this).find(".j-form-select-option-container").hide(),$(this).removeClass("active"))})}).on("click",".j-form-select-option",function(t){t.stopPropagation();var n,a,o,i,r=$(this),s=r.attr("data-value"),c=r.text(),l=r.parents(".j-form-select-option-container"),d=r.parents(".j-form-select"),u=d.attr("data-level"),f=r.parents(".j-form-select-group").find("[data-level="+(Number(u)+1)+"]"),p='<input class="select-other" type="text" placeholder="\u8bf7\u8f93\u5165" name="'+d.find("select").attr("name")+'"></input>';0!==$(".j-form-select-group").length&&(i=JSON.parse($(".j-form-select-group").attr("data-options"))),r.addClass("active"),r.siblings().removeClass("active");var m=l.siblings("select");if(m.val(s),m.find("option[selected]").removeAttr("selected"),m.find('option[value="'+s+'"]').attr("selected",!0),l.siblings(".j-form-select-content").text(c),l.hide(),l.parents(".j-form-select").removeClass("active"),"other"!==s&&"nil"!==s&&"\u5176\u5b83"!==s)d.next("input").remove(),d.removeClass("other_active"),u==o||void 0===o?a===s&&void 0!==a||($.each(i,function(e,t){e==s&&(n=t.concat(),f.find("select").html(""),f.find(".j-form-select-option-content").html(""),$.each(n,function(e,t){f.find("select").append('<option value="'+t+'">'+t+"</option>"),f.find(".j-form-select-option-content").append('<div class="j-form-select-option" data-value="'+t+'">'+t+"</div>")}),f.find(".j-form-select-content").text(n[0]))}),f.removeClass("disable"),f.next("input").remove(),f.removeClass("other_active")):u<o&&(d.siblings().find(".j-form-select-option-content").html(""),d.siblings().find(".j-form-select-content").text("\u8bf7\u9009\u62e9"),d.siblings().find("select").val("")),a=s,o=u;else if(!d.hasClass("other_active")){d.after(p),d.addClass("other_active");var h=f.find("select").attr("name");f.find("select").val("\u5176\u5b83"),f.find(".j-form-select-content").text("\u5176\u5b83"),f.find(".j-form-select-option-content").html('<div class="j-form-select-option" data-value="\u5176\u5b83">\u5176\u5b83</div>'),f.find("select").html('<option value="\u5176\u5b83">\u5176\u5b83</option>'),f.hasClass("other_active")||(f.after('<input class="select-other" type="text" placeholder="\u8bf7\u8f93\u5165" name="'+h+'"></input>'),f.addClass("other_active")),e(f)}}).on("click","form.j-form button",function(){$('[name="form_respondent[respondent][3355][]"]').each(function(){$(this).prop("checked")||($(this).prop("checked",!0),$(this).attr("value",0))})}).on("click","form.j-form button.draft",function(){$('[name="form_respondent[preview]"]').val("1")}).on("click","form.j-form .j-form-img",function(){$(this);var e='<div class="j-form-img-show"><img src="'+this.src+'"></div>';$("body").append(e)}).on("click",".j-form-img-show",function(){$(this).remove()});var t=function(){$.each($(".j-form-select"),function(){var e=$(this),t=e.find("option"),n='<div class="j-form-select-option-container"><div class="j-form-select-option-content"></div></div>';"undefined"==typeof e.parents("pre")[0]&&!e.find(".j-form-select-option-container").length>0&&(e.append(n),$.each(t,function(){if("\u8bf7\u9009\u62e9"!==$(this).text()&&""!==$(this).text()){var t='<div class="j-form-select-option" data-value="'+$(this).attr("value")+'">'+$(this).text()+"</div>";e.find(".j-form-select-option-content").append(t)}})),$(this).attr("data-level")&&"1"!==$(this).attr("data-level")&&$(this).addClass("disable");var a=e.find("select");""!=a.val()&&a.val()||a.val("\u5176\u5b83"),0==a.children().length&&a.append('<option value="\u5176\u5b83"></option>')})};J.on("page.load.form_respondent",function(){t()}),J.on("page.before-cache.form_respondent",function(){$.each($(".j-form-select"),function(){$(this).find(".j-form-select-option-container").remove()})})}(window),function(){$.tap("[data-scroll]",function(){var e,t;return t=$('[data-anchor="'+$(this).attr("data-scroll")+'"]').offset().top,e=$("[data-fixed]").length&&$("[data-tag='header']").length?88:44,$("body, html").animate({scrollTop:t-e},500),!1}),$loaded(function(){var e,t,n,a,o;if($("[data-fixed]").length)return $(".js-fixed-nav-clone").remove(),n=$("[data-fixed]"),a=null,(o={}).fixedTop=0,t=$("[data-fixed]").length&&$("[data-tag='header']").length?88:44,setTimeout(function(){$("body").hasClass("app")||$("body").hasClass("miniprogram")?o.fixedTop=n.offset().top:o.fixedTop=n.offset().top-44},150),(e=$(window)).on("scroll",function(){var i;return(i=e.scrollTop())>o.fixedTop?(a||(a=$(document.createElement("div")).attr("class","js-fixed-nav-clone").attr("data-clone",!0).height(n.outerHeight())).insertBefore(n),n.attr("data-fixed","true"),$("[data-anchor]").each(function(e){if($(this).offset().top-t<=i+10)return n.find("[data-scroll].active").removeClass("active"),n.find("[data-scroll]").eq(e).addClass("active")})):(a&&(a.remove(),a=null),n.attr("data-fixed","false"),n.find("[data-scroll].active").removeClass("active"),n.find("[data-scroll]:first").addClass("active"))})})}.call(this);var type_cache=null;$(document).on("click",".js_mount_tag",function(){var e=$(this),t=e.attr("tag"),n=e.attr("type"),a=e.attr("orderable_id"),o=e.attr("promo_display"),i=$("[data-groupon-modal]"),r="true"===e.attr("data-modal"),s=e.attr("data-id"),c=e.attr("data-user-id"),l=1!=localStorage.getItem("groupon_modal_"+s+"_"+c);if(i&&r&&l&&$(document).on("click","[data-groupon-modal-btn]",function(){if(i.hide(),$("."+t).data("mounted")||null!=type_cache){$("."+t).show();for(var e=0;e<riot.util.vdom.length;e++)"courses_pay_tag"==riot.util.vdom[e].opts["class"]&&(riot.util.vdom[e].mount(),riot.util.vdom[e].type_update());type_cache=n}else $("."+t).attr("data-tag",t),riot.mount().then(function(){env.restore_position(),type_cache=n})}),$("."+t).data("mounted")&&type_cache===n)$("."+t).show();else if($("."+t).attr("data-type",n).attr("data-id",a).attr("promo_display",o),riot.update(),$("."+t).data("mounted")||null!=type_cache)if(i&&r&&l)i.show(),localStorage.setItem("groupon_modal_"+s+"_"+c,1);else{$("."+t).show();for(var d=0;d<riot.util.vdom.length;d++)"courses_pay_tag"==riot.util.vdom[d].opts["class"]&&(riot.util.vdom[d].mount(),riot.util.vdom[d].type_update());type_cache=n}else i&&r&&l?(i.show(),localStorage.setItem("groupon_modal_"+s+"_"+c,1)):($("."+t).attr("data-tag",t),riot.mount().then(function(){env.restore_position(),type_cache=n}))}),J.on("page.before-cache",function(){type_cache=null}),function(){}.call(this),function(){$(document).on("change","#event_expert_event_tag_ids",function(){var e,t;return e=(t=$(this)).parent().parent(),"113"===t.val()?(e.find(".contact_format").addClass("hidden"),e.find(".supervisor_contact_format").removeClass("hidden")):(e.find(".contact_format").removeClass("hidden"),e.find(".supervisor_contact_format").addClass("hidden"))}),$loaded(function(){if($("#event_expert_event_tag_ids").length)return $("#event_expert_event_tag_ids").trigger("change")}),$.tap(".enrollments .titles .title",function(){if(!$(this).hasClass("disabled"))return $("#event_user_event_enrollment_id").val($(this).data("id"))}),$.tap(".fees .titles .title",function(){return $("#event_user_event_fee_id").val($(this).data("id"))}),$.tap(".accept_event_user",function(e){var t;return e.preventDefault(),(t=$(this).parent()).find("#event_user_status").val(1),t.submit(),t.find("a").prop("disabled",!0)}),$.tap(".reject_event_user",function(e){var t;return e.preventDefault(),(t=$(this).parent()).find("#event_user_status").val(2),t.submit(),t.find("a").prop("disabled",!0)}),$.tap("a.button.new-comment",function(){return $("#new_comment").attr("action","/events/"+$(this).data("event-id")+"/comments")})}.call(this),function(){$.tap(".footer .feedback",function(){return Turbolinks.visit("/conversation_users")})}.call(this),function(){$.tap("form button.form_feed",function(){return $(this).parent().addClass("hidden").next().removeClass("hidden"),window.scrollTo(0,0)}),$document.on("click",".show_mental",function(){return $($(this)[0].nextSibling).is(":hidden")?($($(this)[0].nextSibling).removeClass("hidden"),$($(this)[0].lastChild).removeClass("fa-angle-down"),$($(this)[0].lastChild).addClass("fa-angle-up")):($($(this)[0].nextSibling).addClass("hidden"),$($(this)[0].lastChild).addClass("fa-angle-down"),$($(this)[0].lastChild).removeClass("fa-angle-up"))})}.call(this),$loaded(function(){$.tap('input[type="text"]',function(e){if(!Vue.prototype.$browser.desktop){var t=$(this),n=Number.parseInt(t.css("padding-left")),a=e.offsetX-n,o=Number.parseInt(t.css("fontSize")),i=t.val().length,r=Math.round(a/o)>i?i:Math.round(a/o);t[0].setSelectionRange&&t.val().length&&t[0].setSelectionRange(r,r)}})}),$loaded(function(){function e(){$(".js-tab-tests").addClass("active"),$(".js-tab-tests").siblings().removeClass("active"),$(".learns-tests").addClass("active"),$(".learns-tests").siblings().removeClass("active")}var t,n;window.addEventListener("popstate",function(){window.clearInterval(t),window.clearTimeout(n)},!1),setTimeout(function(){$(".free_share").hide()},5e3),t=setInterval(function(){$(".free_share").show(),n=setTimeout(function(){$(".free_share").hide()},5e3)},12e5);var a=$("#dplayer");if(a.length>0){var o=a.attr("data-url"),i=a.attr("data-poster");new DPlayer({container:document.getElementById("dplayer"),video:{url:o,pic:i}})}if($("body.learn_content_base").length>0){var r=$(".header").outerHeight()?$(".header").outerHeight():0,s=window.innerHeight-r-60+"px";Vue.prototype.$browser.ios&&Vue.prototype.$browser.osVersion&&Vue.prototype.$browser.osVersion<11&&Vue.prototype.$browser.wechatVersion&&Vue.prototype.$browser.wechatVersion<"6.7.3"?($(".fixed_prompt_version_text").html("\u8bf7\u5347\u7ea7\u6700\u65b0ios\u7248\u672c\u548c\u6700\u65b0\u5fae\u4fe1\u7248\u672c\u3002"),$(".fixed_prompt_version").css("display","flex"),$("body").css({overflow:"hidden",height:s})):Vue.prototype.$browser.ios&&Vue.prototype.$browser.osVersion&&Vue.prototype.$browser.osVersion<11?($(".fixed_prompt_version_text").html("\u8bf7\u5347\u7ea7\u6700\u65b0ios\u7248\u672c\u3002"),$(".fixed_prompt_version").css("display","flex"),$("body").css({overflow:"hidden",height:s})):Vue.prototype.$browser.wechatVersion&&Vue.prototype.$browser.wechatVersion<"6.7.3"&&($(".fixed_prompt_version_text").html("\u8bf7\u5347\u7ea7\u6700\u65b0\u5fae\u4fe1\u7248\u672c\u3002"),$(".fixed_prompt_version").css("display","flex"),$("body").css({overflow:"hidden",height:s}))}($(".fixed_prompt_version_div img").click(function(){$(".fixed_prompt_version").css("display","none"),$("body").css({overflow:"auto",height:"auto"})}),$(".onpen-training-log").click(function(){$(".training-log-layer").toggle()}),$(".open-share-warpper, .share-close").click(function(){return $(".share-warpper").toggleClass("active"),!1}),$("video").bind("contextmenu",function(){return!1}),$(".js-moments").click(function(){e()}),$(document).on("click",".js-leanrs-tests",function(){e(),Vue.prototype.$browser.app?$("html, body").animate({scrollTop:$(".js-tabs-item.active").offset().top-$("[data-fixed]").height()},200):$("html, body").animate({scrollTop:$(".js-tabs-item.active").offset().top-$("[data-fixed]").innerHeight()-$(".header").innerHeight()},200)}),"logs"===$(".js-tabs-warrper").attr("active_log")&&e(),$("body.learn_content_base_show").length&&Vue.prototype.$browser.android&&Vue.prototype.$browser.wechat)&&("0"==localStorage.getItem("reload")&&(localStorage.setItem("reload",1),window.location.reload()));var c,l,d=$("[data-fullscreen]"),u=!0,f=$(".js-course-info").attr("data-course-id");if($("body.learn_content_base_show").length){var p=$(".js-course-info").attr("data-course-id");if(void 0!==p){var m=localStorage.getItem("course_pageY_"+p);window.scrollTo(0,m)}}setTimeout(function(){$("body.learn_content_base_show").length>0&&(c=setInterval(function(){var e=window.pageYOffset;void 0!==f&&localStorage.setItem("course_pageY_"+f,e),J.each(riot.util.vdom,function(e,t){if("audio-player"===t.opts.dataTag){var n=t.tags.default_audio_player.audio.currentTime;n>0&&localStorage.setItem("audio_cache_"+f,n)}})},3e3))},1e3);var h=function(){var e=document.body.clientHeight-window.screen.height;$(".header .one-pixel-border");window.scrollY<e&&window.scrollY>0&&(l<window.scrollY&&u&&$(".js-reading-fullscreen").hasClass("active")?($(".fixed-nav").addClass("fullscreen"),$(".bottom-btn-container").addClass("fullscreen"),d.parents(".class-detail-tabs").siblings().hide(),(Vue.prototype.$browser.wechat||Vue.prototype.$browser.app)&&($(".learns-materials").hide(),$(".header").addClass("fullscreen"),$("#bell").addClass("fullscreen"),setTimeout(function(){$("#bell").hide()},150)),u=!1):l>window.scrollY&&!u&&$(".js-reading-fullscreen").hasClass("active")&&($(".fixed-nav").removeClass("fullscreen"),$(".bottom-btn-container").removeClass("fullscreen"),d.parents(".class-detail-tabs").siblings().show(),(Vue.prototype.$browser.wechat||Vue.prototype.$browser.app)&&($("#bell").show(),$(".learns-materials").show(),$(".header").removeClass("fullscreen"),$("#bell").removeClass("fullscreen")),u=!0)),window.scrollY+window.screen.height>document.body.clientHeight&&((Vue.prototype.$browser.wechat||Vue.prototype.$browser.app)&&$(".header").removeClass("fullscreen"),$(".fixed-nav").removeClass("fullscreen"),$(".bottom-btn-container").removeClass("fullscreen"),u=!1),l=window.scrollY};if(0!==d.length&&window.addEventListener("scroll",h),$("body.learn_content_base_show").length>0&&J.on("page.before-cache.learn_content_base_show",function(){clearInterval(c)}),$("body.learn_courses_show").length>0){var g=location.search,v=document.querySelector("[data-reading-share-modal]");g.length>0&&-1!=g.indexOf("?")&&(g=g.substr(1).split("&"),J.each(g,function(e,t){"source_user_id"===t.split("=")[0]&&v&&(v.style.display="block")})),$(document).on("click","[data-reading-share-modal-close]",function(){v.style.display="none"})}if($("body.learn_courses_share").length>0){var _=$("[data-info]").attr("data-product-id");Vue.prototype.$fetchJSON("/api/v1/referral/events/gain_qrcode?product_id="+_).then(function(e){$("[data-discount-amount]").text(e.data.discount_amount)})}!function(){var e=document.querySelector(".learn-open-app");if(e){var t=document.querySelector(".close-btn"),n="APPdownload_"+e.dataset.learn_id;t&&e&&(t.onclick=function(t){t.stopPropagation(),e.classList.remove("active"),sessionStorage.setItem(n,1)}),e.onclick=function(){Vue.prototype.$browser.wechat||setTimeout(function(){var e=Vue.prototype.$browser.ios?"https://itunes.apple.com/cn/app/%E7%AE%80%E5%8D%95%E5%BF%83%E7%90%86-%E9%AB%98%E8%B4%A8%E9%87%8F%E7%9A%84%E5%BF%83%E7%90%86%E5%92%A8%E8%AF%A2/id951454292?mt=8":"http://android.myapp.com/myapp/detail.htm?apkName=com.jiandanxinli.smileback";location.href=e},220)}}}()}),J.on("page.before-cache.learn_content_base_show",function(){localStorage.setItem("reload",0)}),function(){$loaded(function(){var e;if(window.location.hash&&(e=$(window.location.hash)).length)return $("html, body").animate({scrollTop:e.offset().top+"px"},{duration:500,easing:"swing"})})}.call(this),function(){$.tap("[data-miniprogram-share]",function(){var e,t,n,a,o,i,r,s;if("undefined"!=typeof wx)return s=$(this).attr("data-url"),r=$(this).attr("data-text"),n=$(this).attr("data-image"),e=$(this).attr("data-coures-id"),t=$(this).attr("data-event-id"),a=$("body").attr("data-image"),o=$("body").attr("data-title"),i=$("body").attr("data-link"),t&&r&&n?(s+="?id="+e+"&num=1&text="+r+"&image="+n+"&eventId="+t+"&share_img="+a+"&share_title="+o+"&share_url="+i,console.log(1,s)):(s+="?id="+e+"&share_img="+a+"&share_title="+o+"&share_url="+i,console.log(2,s)),wx.miniProgram.navigateTo({url:s})})}.call(this),function(){$.tap(".modal.news .close",function(e){var t;return e.preventDefault(),t=$(this),$.ajax({url:t.prop("href")}),t.parentsUntil(".news").parent().remove()}),$.tap(".modal.news .button",function(e){var t;if(""===$(".modal.news .button").data("link"))return e.preventDefault(),t=$(this),$.ajax({url:t.prop("href")}),t.parentsUntil(".news").parent().remove()})}.call(this),function(){$.tap("#agreement",function(e){var t,n,a;return e.preventDefault(),t=(n=$(this)).attr("data-href"),a=n.attr("data-title"),$.ajax({url:t,dataType:"html",success:function(e){return $.alert({title:a,content:e})}})})}.call(this),function(){$loaded(function(){var e;if($("#paid_call_match").length>0)return e=$("#paid_call_match"),$.getJSON("/api/v1/match_experts_status.json",function(t){return t.data&&t.data.online?(e.prop("href",e.data("href")),e.removeAttr("data-href"),e.removeAttr("data-alert-message")):(e.removeAttr("data-href"),e.removeAttr("href"),e.attr("data-alert-message",t.data.message))})})}.call(this),function(){$document.on("submit",".form-post-ajax",function(e){var t;return e.preventDefault(),(t=$(this)).find("button").prop("disabled",!0),$.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),success:function(){return!0}})}),$.tap(".write-box, .comments-count",function(){var e,t,n;return n=$(this),(e=$(n.attr("href"))).trigger("focus"),Vue.prototype.$browser.app||(t=e.offset().top),$("html, body").animate({scrollTop:t},"slow"),!1})}.call(this),function(){$.tap(".js-order-counseling-stepone",function(){if(!$(this).hasClass("disabled"))return $(".new-order-counseling-wrap").hide(),$(".js-order-counseling-hide").hide(),$(".new-order-steptwo").show()}),$.tap(".reservation_times_list.visitor .list div, .reservation_times_list.visitor_all .list div",function(){var e;if((e=$(this)).data("id"))return $(".reservation_times_list .active").removeClass("active"),e.addClass("active"),$("#order_counseling_orderable_id, #order_consultation_orderable_id, #order_supervision_orderable_id").val(e.data("id"))}),$.tap(".reservation_times_list.reserve_time .list div",function(){var e,t;if((e=$(this)).data("id"))return e.toggleClass("active"),t=[],$(".reservation_times_list .active").map(function(){return t.push($(this).data("id"))}),$("#time_ids").val(t.join(","))}),$.tap(".reservation_times_reserved_times .ui.success.message",function(){return location.href="/reservation_time_roles"}),$.tap(".reservation_times_list.expert .popup a",function(e){var t,n;switch(e.preventDefault(),(n=$(this).data()).status){case 0:t="<a class='reservation_time_action' href='/reservation_times/"+n.id+"/reserved'>\u9884\u7559\u7ed9\u6765\u8bbf</a>",!n.past&&n.loop&&n.reservationTimeRoleId&&(t+="<a data-href='/reservation_times/"+n.id+"/edit' data-message='"+n.message+"' data-repeat_info='"+n.repeatInfo+"' data-loop='"+n.loop+"' data-text='\u65f6\u6bb5' data-role='"+n.reservationTimeRoleId+"' data-id='"+n.id+"' class='reservation_time_action reservation_time_change'>\u66f4\u6539\u65f6\u6bb5</a>",t+="<a data-href='/reservation_times/"+n.id+"' data-message='"+n.message+"' data-repeat_info='"+n.repeatInfo+"' data-loop='"+n.loop+"' data-role='"+n.reservationTimeRoleId+"' data-id='"+n.id+"' class='reservation_time_action delete-reservation-time reservation_time_remove'>\u5220\u9664\u65f6\u6bb5</a>"),n.past||!n.loop||n.reservationTimeRoleId||(t+="<a href='/reservation_times/"+n.id+"/edit' data-message='"+n.message+"' data-repeat_info='"+n.repeatInfo+"' class='reservation_time_action'>\u66f4\u6539\u65f6\u6bb5</a>",t+="<a href='/reservation_times/"+n.id+"' data-message='"+n.message+"' data-repeat_info='"+n.repeatInfo+"' data-method='delete' data-confirm='\u4f60\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e2a\u65f6\u95f4\u6bb5\u5417\uff1f' class='reservation_time_action delete-reservation-time'>\u5220\u9664\u65f6\u6bb5</a>"),n.past||n.loop||(t+="<a href='/reservation_times/"+n.id+"/edit' data-message='"+n.message+"' data-repeat_info='"+n.repeatInfo+"' class='reservation_time_action'>\u66f4\u6539\u65f6\u6bb5</a>",t+="<a href='/reservation_times/"+n.id+"' data-message='"+n.message+"' data-repeat_info='"+n.repeatInfo+"' data-method='delete' data-confirm='\u4f60\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e2a\u65f6\u95f4\u6bb5\u5417\uff1f' class='reservation_time_action delete-reservation-time'>\u5220\u9664\u65f6\u6bb5</a>");break;case 1:t="<a class='reservation_time_action' href='/reservation_times/"+n.id+"/unlock'>\u5f00\u542f\u8be5\u65f6\u6bb5</a>";break;case 2:t=3===n.orderStatus&&"OrderCounseling"===n.type||1===n.orderStatus&&"OrderConsultation"===n.type||1===n.orderStatus&&"OrderSupervision"===n.type?"<a class='reservation_time_action' style='background-color: #b1b1b1' >\u7b49\u5f85\u7528\u6237\u4ed8\u6b3e</a>":"<a class='reservation_time_action' href='"+n.orderPath+"'>\u67e5\u770b\u8ba2\u5355\u8be6\u60c5</a>";break;case 3:t="<a class='reservation_time_action' href='"+n.orderPath+"'>\u67e5\u770b\u8ba2\u5355\u8be6\u60c5</a>",n.past||(t+="<a class='reservation_time_action' href='"+n.orderPath+"/edit'>\u66f4\u6539\u9884\u7ea6</a>");break;case 4:t=n.repeat?"<a class='reservation_time_action reservation_time_update' data-id='"+n.id+"' data-text='\u9884\u7559' data-message='"+n.message+"' data-rule='"+n.reservationRule+"' data-repeat='"+n.repeat+"' data-href='/reservation_times/"+n.id+"/unlock'>\u64a4\u9500\u9884\u7559</a>":"<a class='reservation_time_action' style='margin-top: 0' data-message='"+n.message+"' href='/reservation_times/"+n.id+"/unlock'>\u64a4\u9500\u9884\u7559</a>"}return 0!==n.status&&4!==n.status||n.past||!n.counseling||(t+="<a class='reservation_time_action' href='/reservation_times/"+n.id+"/reservation'>\u521b\u5efa\u9884\u7ea6</a>"),0===n.status&&(t+="<div style='display: block; text-align: center; margin-bottom: 30px;'><a href='/reservation_times/"+n.id+"/lock' style='display: inline-block;'>\u4e34\u65f6\u5173\u95ed\u8be5\u65f6\u6bb5</a></div>"),n.past&&3!==n.status&&(t='<p style="margin-bottom: 30px;">\u8fd9\u4e2a\u65f6\u6bb5\u5df2\u7ecf\u8fc7\u671f\u5566\uff0c\u6ca1\u6709\u53ef\u8fdb\u884c\u7684\u64cd\u4f5c</p>'),$.dialog({title:"\u9009\u62e9\u64cd\u4f5c",content:t})}),$.tap(".reservation_time_change",function(){var e,t,n,a,o,i,r;return t=$(this).data("href"),n=$(this).data("loop"),i=$(this).data("role"),r=$(this).data("id"),a=$(this).data("message"),o=$(this).data("repeat_info"),n&&i?(e="<a class='reservation_time_action' href='"+t+"'>\u4ec5\u66f4\u6539\u8be5\u65f6\u6bb5</a>",e+="<a class='reservation_time_action' href='/reservation_time_roles/new?reservation_time_id="+r+"'>\u66f4\u6539\u6b64\u65f6\u6bb5\u53ca\u4e4b\u540e"+o+"\u540c\u4e00\u65f6\u6bb5</a>",$.dialog({title:"\u8fd9\u662f\u4e00\u4e2a\u91cd\u590d\u6027\u65f6\u6bb5\uff0c\u91cd\u590d\u89c4\u5219\u4e3a<br/>"+a,content:e})):Turbolinks.visit(t)}),$.tap(".reservation_time_remove",function(){var e,t,n,a,o,i,r;return t=$(this).data("href"),n=$(this).data("loop"),i=$(this).data("role"),r=$(this).data("id"),a=$(this).data("message"),o=$(this).data("repeat_info"),n?(e="<a class='reservation_time_action' data-method='delete' href='"+t+"'>\u4ec5\u5220\u9664\u8be5\u65f6\u6bb5</a>",e+="<a class='reservation_time_action' data-method='delete' href='reservation_time_roles/"+i+"?reservation_time_id="+r+"'>\u5220\u9664\u6b64\u65f6\u6bb5\u53ca\u4e4b\u540e"+o+"\u540c\u4e00\u65f6\u6bb5</a>",$.dialog({title:"\u8fd9\u662f\u4e00\u4e2a\u91cd\u590d\u6027\u65f6\u6bb5\uff0c\u91cd\u590d\u89c4\u5219\u4e3a<br/>"+a,content:e})):Turbolinks.visit(t)}),$.tap(".reservation_time_update",function(){var e,t,n,a,o,i;return t=$(this).data("href"),$(this).data("text"),a=$(this).data("repeat"),o=$(this).data("rule"),i=$(this).data("id"),n=$(this).data("message"),a?(e="<a class='reservation_time_action' href='"+t+"'>\u4ec5\u64a4\u9500\u8be5\u6b21\u9884\u7559</a>",e+="<a class='reservation_time_action' data-method='post' href='/reservation_rules/"+o+"/unlock?reservation_time_id="+i+"'>\u64a4\u9500\u6b64\u9884\u7559\u53ca\u4e4b\u540e\u6240\u6709\u9884\u7559</a>",$.dialog({title:"\u6b64\u4e3a\u6279\u91cf\u9884\u7559\uff0c"+n,content:e})):Turbolinks.visit(t)}),$.tap(".reservation_time_action",function(){return $(this).parentsUntil(".jconfirm").parent().remove()}),$loaded(function(){var e;if($(".j-form-radio label").on("click",function(){return $(this).addClass("active").parent().siblings().find("label").removeClass("active")}),$('.range-slider input[type="range"]').on("input",function(){return $(this).prev(".button").html(this.value)}),$('[data-modal-target="#counseling-time"]').trigger("click"),null!==(e=$("#order_counseling_orderable_id").val())&&""!==e)return $(".visitor_reservation_times_list .time.active").trigger("click")}),$(document).on("ajax:before","form[id^=edit_order_counseling_],form[id^=edit_reservation_time_],form[id^=edit_order_consultation],form[id^=edit_order_supervision]",function(e){var t,n,a,o,i,r,s,c,l,d,u;if(t=$(this),("adjust"===$(".jd-tabs-title.active").data("id")||0===t.prop("id").indexOf("edit_reservation_time_"))&&(a=$("#reservation_time_started_at_date"),o=$("#reservation_time_started_at_hour"),i=$("#reservation_time_started_at_minute"),n=$(".reservation_time_session_minutes"),l=a.val()+" "+o.val()+":"+i.val(),u=a.val()+"T"+o.val()+":"+i.val()+"+08:00",c=n.val(),l!==a.data("value")||c!==n.data("value")))return r=function(){return t.find("button[disabled]").prop("disabled",!1)},d=function(){return a.data("value",l),n.data("value",c),t.submit()},new Date(u)<new Date?((s=function(){return $.alert({content:"\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u662f\u8fc7\u53bb\u65f6\u95f4",confirm:function(){return r()}})})(),!1):(s=function(){return $.alert({content:"\u4fee\u6539\u540e\u7684\u65f6\u6bb5\u5df2\u88ab\u5360\u7528\uff0c\u65e0\u6cd5\u5b8c\u6210\u64cd\u4f5c\uff01",confirm:function(){return r()}})},$.ajax({method:"POST",dataType:"json",beforeSend:function(e){return $.rails.CSRFProtection(e)},url:"/reservation_times/"+a.data("id")+"/adjust",data:{started_at:l,session_minutes:c},success:function(e){if(!e.save)return e.can_override_overlapped_reservation_times?$.confirm({content:"\u4fee\u6539\u540e\u7684\u65f6\u6bb5\u4e0e\u4ee5\u4e0b\u65f6\u6bb5\u91cd\u53e0\uff1a<br>"+e.overlapped_reservation_times.join("<br>")+"<br>\u4fdd\u5b58\u540e\u539f\u6709\u65f6\u6bb5\u4f1a\u88ab\u5220\u9664\uff0c\u786e\u5b9a\u4fdd\u5b58\uff1f",confirm:function(){return $.ajax({method:"POST",dataType:"json",beforeSend:function(e){return $.rails.CSRFProtection(e)},url:"/reservation_times/"+a.data("id")+"/adjust",data:{started_at:l,session_minutes:c,override:!0},success:function(e){return e.save?d():s()}})},cancel:function(){return r()}}):s();d()}}),e.preventDefault(),!1)}),$.tap(".monthly_reservation",function(){var e;return e=$(this).data(),$.confirm({title:"\u6b64\u64cd\u4f5c\u5c06\u76f4\u63a5\u66ff\u6765\u8bbf\u751f\u6210\u9884\u7ea6\uff0c\u8bf7\u52a1\u5fc5\u786e\u8ba4\u4f60\u5df2\u7ecf\u4e0e\u6765\u8bbf\u6c9f\u901a\u4e00\u81f4\uff01\u5982\u679c\u51fa\u73b0\u7ea0\u7eb7\uff0c\u8d23\u4efb\u7531\u54a8\u8be2\u5e08\u627f\u62c5",content:"\u70b9\u51fb\u201c\u786e\u5b9a\u201d\u4e3a\u5bf9\u65b9\u751f\u6210\u9884\u7ea6\uff0c\u5426\u5219\u8bf7\u70b9\u51fb\u53d6\u6d88\u3002",confirm:function(){return $.ajax({method:"POST",dataType:"json",beforeSend:function(e){return $.rails.CSRFProtection(e)},url:"/api/v1/order_counselings/monthly_reservation",data:{user_id:e.formUserId,to_user_id:e.toUserId,time_id:e.timeId},success:function(e){return e.errors?$.alert({title:e.errors.detail}):window.location.href="/order_counselings/"+e.data.id}})}})})}.call(this),function(){}.call(this),function(){$loaded(function(){var e,t;if($(".tags-filter").length>0&&$(".tags-filter .active").length>0&&(t=$(".tags-filter"),e=$(".tags-filter .active"),t.width()<e.width()+e.offset().left))return t.animate({scrollLeft:e.offset().left-t.width()/2},0)})}.call(this),function(){}.call(this),function(){$loaded(function(){if($("body.users_home.mobile, body.reservation_time_roles_index.mobile").length)return $("#back").prop("href","/users/home")}),$loaded(function(){if($("#new_photo").length>0&&"undefined"!=typeof FormData)return $("#new_photo").on("submit",function(e){var t,n,a;if(e.preventDefault(),(n=(t=$(this)).find("input[type=file]")[0]).files.length>0)return(a=new FormData).append("image[url]",n.files[0]),$.ajax({url:$(this).prop("action"),data:a,cache:!1,contentType:!1,processData:!1,type:"POST",beforeSend:function(){return t.find("button").html("\u4e0a\u4f20...").prop("disabled","disabled")},success:function(){return Turbolinks.visit(window.location.pathname,{action:"replace"})}})})})}.call(this),function(){$document.on("ajax:complete.rails","a.votable",function(e,t){return $(this).after(t.responseText).remove()})}.call(this),function(){$.rails.fileInputSelector="input[type=file][name]:not([disabled])",$.tap(".disabled",function(e){return e.preventDefault()}).tap("a.swing-to",function(){var e;return e=$(this),$("html, body").animate({scrollTop:$(e.attr("href")).offset().top+"px"},{duration:500,easing:"swing"}),!1}).tap("a.committe-swing-to",function(){var e,t;return e=$(this),t=Vue.prototype.$browser.desktop?0:50,$("html, body").animate({scrollTop:$(e.attr("href")).offset().top-t+"px"},{duration:500,easing:"swing"}),!1}).tap(".container.about .more",function(){var e,t;return(e=(t=$(this)).parent()).find(".col_100.overall").hasClass("active")?(t.text("\u9605\u8bfb\u5168\u90e8"),e.find(".col_100.overall").removeClass("active")):(t.text("\u6536\u8d77"),e.find(".col_100.overall").addClass("active"))}).tap(".container.intro .more",function(){var e,t
;return(e=(t=$(this)).parent()).find(".col_100.overall").hasClass("active")?(t.text("\u9605\u8bfb\u5168\u90e8"),e.find(".col_100.overall").removeClass("active")):(t.text("\u6536\u8d77"),e.find(".col_100.overall").addClass("active"))}).tap(".tabs .title",function(){var e,t,n;if(!(t=$(this)).hasClass("active")&&!t.hasClass("disabled"))return n=t.parent().children().index(this),(e=t.parent().parent()).find(".title.active, .content.active").removeClass("active"),e.find(".titles .title:eq("+n+")").addClass("active"),e.find(".contents .content:eq("+n+")").addClass("active")}).on("ajax:complete.rails","a.add_comment",function(e,t){var n,a,o;return 0!==(n=(a=(o=$(this)).parent()).find("#new_comment")).length?(n.slideUp(1e3).remove(),o.text("\u56de\u590d"),!1):(a.append(t.responseText).slideDown(1e3),o.text("\u6536\u8d77\u56de\u590d"))}).on("ajax:before.rails","#new_comment",function(){return $(this).find("button").prop("disabled",!0)}).on("ajax:complete.rails","#new_comment",function(e,t){var n,a;return(a=$(this)).parent().hasClass("sub")?(n=$(".comment.sub_comment:first"),$(t.responseText).insertBefore(n).hide().show(1e3)):(n=a.parent(),$(t.responseText).insertAfter(n).hide().show(1e3)),a.slideUp(1e3,function(){return $(".add_comment").text("\u56de\u590d"),a.remove()})}).tap("[data-alert-message]",function(){return alert($(this).data("alert-message"))}).tap("[data-alertMessage]",function(){return alert($(this).data("alertMessage"))}).tap("a.scroll-to",function(){var e;return e=$($(this).data("scroll-to")),$(window).scrollTop(e.position().top)}),$.tap("#only_junior",function(){return $("#only_junior").is(":checked")?location.href.match(/\/experts$/)?location.href=location.href+"?only_junior=true":location.href=location.href+"&only_junior=true":location.href=location.href.replace(/[\?|&]only_junior=true/,"").replace(/experts&/,"experts?")}),$.tap("#only_available",function(){return $("#only_available").is(":checked")?location.href.match(/\/experts$/)?location.href=location.href+"?only_available=true":location.href=location.href+"&only_available=true":location.href=location.href.replace(/[\?|&]only_available=true/,"").replace(/experts&/,"experts?")}),$.tap(".jfa-times-circle",function(){if("simple_search_clear"!==$(this).attr("id"))return $(this).parent().hide()}),$loaded(function(){return $(".jd-mobile-footer").length?$("#content_wrapper").css("margin-bottom","95px"):$("#bottom_msg").length?$("#content_wrapper").css("margin-bottom","60px"):void 0}),$.tap(".speak_confirm.standard_call",function(e){return e.preventDefault(),Turbolinks.visit("/order_paid_calls/new?order_paid_call%5Bpaid_call_type%5D=0&order_paid_call%5Bto_user_id%5D="+$(this).data("lid"))}),$.tap(".j-alert .j-alert-close",function(){return $(this).parents(".j-alert").hide()}),$.tap("[data-close]",function(){return $(this).parents(".j-modal").hide()})}.call(this),function(){$loaded(function(){var e;if($body.hasClass("pages_home"))return e=function(){var t,n;if(0!==(n=$(".slide_wrapper").css("background","#000")).length)return(t=n.find(".active").removeClass("active").next()).length?t.addClass("active"):n.children().first().addClass("active"),setTimeout(function(){return e()},1e4)},setTimeout(function(){return e()},1e3)})}.call(this),function(){}.call(this);