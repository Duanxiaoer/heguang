"use strict";riot.tag2("mine-order-counselings",'<div class="filter"><a class="{{active: data.param.filter.status == \'1\'}}" onclick="{{update_filter({status: \'1\'})}}">待审核</a><a class="{{active: data.param.filter.status == \'4,14\'}}" onclick="{{update_filter({status: \'4,14\'})}}">待咨询</a><a class="{{active: data.param.filter.status == \'5,8,15,16\'}}" onclick="{{update_filter({status: \'5,8,15,16\'})}}">已完成</a></div><div class="order-list common-list" if="{{data.has}}"><div class="order-item common-item" each="{{order in data.list}}"><div class="order-item__head"><div class="order-item__status">{{order.attributes.status_humanize}}</div><div class="order-item__number">订单号：{{order.id}}</div></div><div class="order-item__detail"><a class="order-item__body" href="/order_counselings/{{order.id}}"><div class="order-item__image"><img riot-src="{{order.attributes.user.avatar}}"></div><div class="order-item__info"><h3>{{order.attributes.user.name}} #{{order.attributes.user.id}}</h3><p>第{{order.attributes.times}}次 {{order.attributes.counseling_type_humanize}}</p><p>{{order.attributes.datetime_humanize}}</p><p if="{{order.attributes.process_type == 2 &amp;&amp; (order.attributes.status === 4 || order.attributes.status === 8) &amp;&amp; order.attributes.paid_at}}">支付时间：{{time_format(order.attributes.paid_at)}}</p><p if="{{order.attributes.process_type == 2 &amp;&amp; (order.attributes.status === 14 || order.attributes.status === 15)}}">支付时间：尚未支付</p></div></a><div class="order-item__footer"><div class="order-item__price"><i class="fa fa-jpy">{{order.attributes.original_price}} 元</i></div><div class="order-item__btns"><a class="order-item__btn button button--empty" href="/order_counselings/{{order.id}}">详情</a><a class="order-item__btn button button--empty" if="{{order.attributes.abilities.message}}" href="/messages?user_id={{order.attributes.user.id}}">私信</a><a class="order-item__btn button" if="{{order.attributes.abilities.update &amp;&amp; (order.attributes.status === 4 || order.attributes.status === 14)}}" href="/order_counselings/{{order.id}}/edit">更改预约</a><a class="order-item__btn button" if="{{order.attributes.abilities.update &amp;&amp; order.attributes.status === 1}}" href="/order_counselings/{{order.id}}">审核</a></div></div></div></div></div><div class="load-more"><button class="button--medium" if="{{!data.loading &amp;&amp; data.next_link}}" onclick="{{load_next}}">加载更多<i class="fa fa-angle-down"></i></button><button class="button--medium" if="{{data.loading}}">正在加载...</button><button class="button--medium" if="{{!data.list.length &gt; 9 &amp;&amp; !data.loading &amp;&amp; !data.next_link}}" disabled>没有更多了~</button></div><div class="order-none-tips" if="{{!data.has}}"><div class="page-blank"><img src="//jdxl-img.b0.upaiyun.com/uploads/bd3c9543c1a04d7fb21457767af22db2.png"><p>还没有相关内容</p></div></div>',"","",function(t){var a=this;a.data={};var e=a.data;e.list=[],e.has=!1,e.loading=!0,e.next_link=null,e.paid_at=null,e.param={filter:{mine:!0,status:"1"}},a.time_format=function(t){var a=6e4*(new Date).getTimezoneOffset(),e=new Date(1e3*t+a+288e5);function i(t){return t<10?"0"+t:t}return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+i(e.getHours())+":"+i(e.getMinutes())},a.update_filter=function(t){return function(){e.has=!0,e.list=[],e.loading=!0,$.extend(e.param.filter,t),a.update(),Api.get("order_counselings?"+$.param(e.param)).done(a.process_data)}},a.process_data=function(t){e.list=e.list.concat(t.data),e.next_link=t.links.next,0<e.list.length?e.has=!0:e.has=!1,e.loading=!1,a.update()},a.load_next=function(){e.loading=!0,Api.get(e.next_link).done(a.process_data)},a.on("before-mount",function(){riot.fetch_cache(a)}),a.on("mount",function(){e.fetched_cache||Api.get("order_counselings?"+$.param(e.param)).done(a.process_data)})});